<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Accessibilit√© des Champs Corrig√©s - LinkedINPost</title>
    
    <!-- Styles de base -->
    <link rel="stylesheet" href="design-fixes.css">
    <link rel="stylesheet" href="accessibility-fixes.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            background: #f8f9fa;
        }
        
        .test-section h2 {
            color: #0077b5;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .required {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .field-help {
            font-size: 13px;
            color: #7f8c8d;
            margin-top: 6px;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 3px solid #0077b5;
        }
        
        .test-results {
            background: #e8f5e8;
            border: 1px solid #27ae60;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .test-results h3 {
            color: #27ae60;
            margin-top: 0;
        }
        
        .test-item {
            margin: 10px 0;
            padding: 8px;
            border-radius: 4px;
            background: white;
        }
        
        .test-item.success {
            background: #d4edda;
            border-left: 4px solid #27ae60;
        }
        
        .test-item.error {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }
        
        .test-item.warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        
        .accessibility-info {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .accessibility-info h3 {
            color: #2196f3;
            margin-top: 0;
        }
        
        .keyboard-nav {
            background: #fff3e0;
            border: 1px solid #ff9800;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .keyboard-nav h3 {
            color: #ff9800;
            margin-top: 0;
        }
        
        .keyboard-nav kbd {
            background: #f5f5f5;
            border: 1px solid #ccc;
            border-radius: 3px;
            padding: 2px 6px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Test d'Accessibilit√© des Champs Corrig√©s</h1>
        
        <div class="accessibility-info">
            <h3>üìã Objectif du Test</h3>
            <p>Ce test v√©rifie que les corrections d'accessibilit√© des champs de saisie fonctionnent correctement et que tous les champs sont saisissables et accessibles.</p>
        </div>
        
        <div class="test-section">
            <h2>üîß Formulaire de Test avec Corrections d'Accessibilit√©</h2>
            
            <form id="testForm" novalidate>
                <div class="form-group">
                    <label for="testSubject" id="testSubjectLabel">
                        Sujet du post <span class="required" aria-label="Champ obligatoire">*</span>
                    </label>
                    <textarea id="testSubject" name="subject" required 
                             rows="3" 
                             placeholder="D√©crivez le sujet de votre post LinkedIn en quelques lignes..."
                             aria-describedby="testSubject-help"
                             aria-required="true"
                             aria-invalid="false"
                             aria-label="Zone de texte pour d√©crire le sujet de votre post LinkedIn"
                             tabindex="0"
                             autocomplete="off"
                             spellcheck="true"></textarea>
                    <div id="testSubject-help" class="field-help" role="tooltip" aria-hidden="false">
                        Par exemple : votre expertise, une r√©flexion professionnelle, une actualit√© de votre secteur, etc.
                    </div>
                </div>

                <div class="form-group">
                    <label for="testAudience" id="testAudienceLabel">
                        Audience cible <span class="required" aria-label="Champ obligatoire">*</span>
                    </label>
                    <select id="testAudience" name="audience" required 
                            aria-describedby="testAudience-help"
                            aria-required="true"
                            aria-invalid="false"
                            aria-label="Menu d√©roulant pour s√©lectionner l'audience cible"
                            tabindex="0">
                        <option value="" aria-label="Option par d√©faut - Choisir une audience">Choisir une audience...</option>
                        <option value="professionals" aria-label="Professionnels exp√©riment√©s">Professionnels exp√©riment√©s</option>
                        <option value="juniors" aria-label="Jeunes professionnels">Jeunes professionnels</option>
                        <option value="entrepreneurs" aria-label="Entrepreneurs">Entrepreneurs</option>
                        <option value="managers" aria-label="Managers et dirigeants">Managers et dirigeants</option>
                        <option value="students" aria-label="√âtudiants">√âtudiants</option>
                        <option value="recruiters" aria-label="Recruteurs RH">Recruteurs RH</option>
                    </select>
                    <div id="testAudience-help" class="field-help" role="tooltip" aria-hidden="false">
                        S√©lectionnez le type de professionnels que vous souhaitez cibler avec votre post
                    </div>
                </div>

                <div class="form-group">
                    <label for="testTone" id="testToneLabel">
                        Ton du message <span class="required" aria-label="Champ obligatoire">*</span>
                    </label>
                    <select id="testTone" name="tone" required 
                            aria-describedby="testTone-help"
                            aria-required="true"
                            aria-invalid="false"
                            aria-label="Menu d√©roulant pour s√©lectionner le ton du message"
                            tabindex="0">
                        <option value="" aria-label="Option par d√©faut - Choisir un ton">Choisir un ton...</option>
                        <option value="professional" aria-label="Ton professionnel">Professionnel</option>
                        <option value="inspirational" aria-label="Ton inspirant">Inspirant</option>
                        <option value="casual" aria-label="Ton d√©contract√©">D√©contract√©</option>
                        <option value="educational" aria-label="Ton √©ducatif">√âducatif</option>
                        <option value="motivational" aria-label="Ton motivant">Motivant</option>
                        <option value="thoughtful" aria-label="Ton r√©fl√©chi">R√©fl√©chi</option>
                    </select>
                    <div id="testTone-help" class="field-help" role="tooltip" aria-hidden="false">
                        D√©finissez l'ambiance et le style de votre message LinkedIn
                    </div>
                </div>

                <div class="form-group">
                    <label for="testLanguage" id="testLanguageLabel">
                        Langue du post <span class="required" aria-label="Champ obligatoire">*</span>
                    </label>
                    <select id="testLanguage" name="postLanguage" required 
                            aria-describedby="testLanguage-help"
                            aria-required="true"
                            aria-invalid="false"
                            aria-label="Menu d√©roulant pour s√©lectionner la langue du post"
                            tabindex="0">
                        <option value="fr" aria-label="Fran√ßais">Fran√ßais</option>
                        <option value="en" aria-label="English">English</option>
                    </select>
                    <div id="testLanguage-help" class="field-help" role="tooltip" aria-hidden="false">
                        Choisissez la langue dans laquelle votre post sera g√©n√©r√©
                    </div>
                </div>

                <div class="form-group">
                    <label for="testModel" id="testModelLabel">
                        Mod√®le IA <span class="required" aria-label="Champ obligatoire">*</span>
                    </label>
                    <select id="testModel" name="ollamaModel" required 
                            aria-describedby="testModel-help"
                            aria-required="true"
                            aria-invalid="false"
                            aria-label="Menu d√©roulant pour s√©lectionner le mod√®le d'intelligence artificielle"
                            tabindex="0">
                        <option value="" aria-label="Option par d√©faut - Choisir un mod√®le">Choisir un mod√®le...</option>
                        <option value="llama2" aria-label="Mod√®le Llama 2">Llama 2</option>
                        <option value="mistral" aria-label="Mod√®le Mistral">Mistral</option>
                        <option value="codellama" aria-label="Mod√®le Code Llama">Code Llama</option>
                    </select>
                    <div id="testModel-help" class="field-help" role="tooltip" aria-hidden="false">
                        S√©lectionnez le mod√®le d'intelligence artificielle qui g√©n√©rera votre post
                    </div>
                </div>

                <button type="submit" class="generate-btn" 
                        aria-describedby="testGenerate-help"
                        aria-label="Bouton de test pour g√©n√©rer un post LinkedIn"
                        tabindex="0">
                    <span>üß™ Tester la G√©n√©ration</span>
                </button>
                
                <div id="testGenerate-help" class="field-help" role="tooltip" aria-hidden="false">
                    Bouton de test pour v√©rifier le fonctionnement du formulaire
                </div>
            </form>
        </div>

        <div class="keyboard-nav">
            <h3>‚å®Ô∏è Navigation Clavier</h3>
            <p><strong>Instructions :</strong> Utilisez la touche <kbd>Tab</kbd> pour naviguer entre les champs et <kbd>Shift + Tab</kbd> pour revenir en arri√®re.</p>
            <p><strong>Test :</strong> Essayez de naviguer dans tous les champs avec le clavier pour v√©rifier l'accessibilit√©.</p>
        </div>

        <div class="test-section">
            <h2>üîç Tests d'Accessibilit√© Automatiques</h2>
            
            <button id="runTests" class="generate-btn" style="margin-bottom: 20px;">
                üöÄ Lancer les Tests d'Accessibilit√©
            </button>
            
            <div id="testResults" class="test-results" style="display: none;">
                <h3>üìä R√©sultats des Tests</h3>
                <div id="testResultsContent"></div>
            </div>
        </div>

        <div class="test-section">
            <h2>üìù Instructions de Test Manuel</h2>
            
            <ol>
                <li><strong>Test de Saisie :</strong> Essayez de taper du texte dans le champ "Sujet du post"</li>
                <li><strong>Test des Menus :</strong> Cliquez sur les menus d√©roulants pour v√©rifier qu'ils s'ouvrent</li>
                <li><strong>Test de Navigation :</strong> Utilisez Tab/Shift+Tab pour naviguer entre les champs</li>
                <li><strong>Test de Focus :</strong> V√©rifiez que chaque champ re√ßoit bien le focus visuellement</li>
                <li><strong>Test des Messages d'Aide :</strong> V√©rifiez que les textes d'aide sont visibles</li>
                <li><strong>Test de Validation :</strong> Essayez de soumettre le formulaire vide pour voir les erreurs</li>
            </ol>
        </div>
    </div>

    <script>
        class AccessibilityTester {
            constructor() {
                this.form = document.getElementById('testForm');
                this.runTestsBtn = document.getElementById('runTests');
                this.testResults = document.getElementById('testResults');
                this.testResultsContent = document.getElementById('testResultsContent');
                
                this.init();
            }
            
            init() {
                this.runTestsBtn.addEventListener('click', () => this.runAllTests());
                this.form.addEventListener('submit', (e) => this.handleSubmit(e));
                
                // Tests automatiques au chargement
                setTimeout(() => this.runBasicTests(), 1000);
            }
            
            runBasicTests() {
                console.log('üß™ Tests d\'accessibilit√© de base en cours...');
                this.testFieldAccessibility();
                this.testKeyboardNavigation();
                this.testScreenReaderSupport();
            }
            
            runAllTests() {
                console.log('üöÄ Lancement de tous les tests d\'accessibilit√©...');
                this.testResults.style.display = 'block';
                this.testResultsContent.innerHTML = '';
                
                const tests = [
                    { name: 'Accessibilit√© des Champs', test: () => this.testFieldAccessibility() },
                    { name: 'Navigation Clavier', test: () => this.testKeyboardNavigation() },
                    { name: 'Support Lecteur d\'√âcran', test: () => this.testScreenReaderSupport() },
                    { name: 'Validation des Attributs ARIA', test: () => this.testARIAAttributes() },
                    { name: 'Contraste et Lisibilit√©', test: () => this.testContrastAndReadability() },
                    { name: 'Responsive et Tactile', test: () => this.testResponsiveAndTouch() }
                ];
                
                tests.forEach((test, index) => {
                    setTimeout(() => {
                        const result = test.test();
                        this.displayTestResult(test.name, result);
                    }, index * 500);
                });
            }
            
            testFieldAccessibility() {
                const fields = this.form.querySelectorAll('input, select, textarea');
                let accessibleFields = 0;
                let totalFields = fields.length;
                
                fields.forEach(field => {
                    if (this.isFieldAccessible(field)) {
                        accessibleFields++;
                    }
                });
                
                return {
                    success: accessibleFields === totalFields,
                    score: accessibleFields,
                    total: totalFields,
                    message: `${accessibleFields}/${totalFields} champs sont accessibles`
                };
            }
            
            isFieldAccessible(field) {
                // V√©rifier que le champ est visible et interactif
                const isVisible = field.offsetWidth > 0 && field.offsetHeight > 0;
                const hasLabel = field.labels && field.labels.length > 0;
                const hasAriaLabel = field.hasAttribute('aria-label');
                const hasAriaDescribedby = field.hasAttribute('aria-describedby');
                const isNotDisabled = !field.disabled;
                const hasTabIndex = field.tabIndex >= 0;
                
                return isVisible && (hasLabel || hasAriaLabel) && hasAriaDescribedby && isNotDisabled && hasTabIndex;
            }
            
            testKeyboardNavigation() {
                const fields = this.form.querySelectorAll('input, select, textarea, button');
                let navigableFields = 0;
                let totalFields = fields.length;
                
                fields.forEach(field => {
                    if (field.tabIndex >= 0 && !field.disabled) {
                        navigableFields++;
                    }
                });
                
                return {
                    success: navigableFields === totalFields,
                    score: navigableFields,
                    total: totalFields,
                    message: `${navigableFields}/${totalFields} champs sont navigables au clavier`
                };
            }
            
            testScreenReaderSupport() {
                const fields = this.form.querySelectorAll('input, select, textarea');
                let supportedFields = 0;
                let totalFields = fields.length;
                
                fields.forEach(field => {
                    const hasAriaLabel = field.hasAttribute('aria-label');
                    const hasAriaDescribedby = field.hasAttribute('aria-describedby');
                    const hasAriaRequired = field.hasAttribute('aria-required');
                    const hasAriaInvalid = field.hasAttribute('aria-invalid');
                    
                    if (hasAriaLabel || hasAriaDescribedby) {
                        supportedFields++;
                    }
                });
                
                return {
                    success: supportedFields === totalFields,
                    score: supportedFields,
                    total: totalFields,
                    message: `${supportedFields}/${totalFields} champs ont un support lecteur d'√©cran`
                };
            }
            
            testARIAAttributes() {
                const fields = this.form.querySelectorAll('input, select, textarea');
                let validFields = 0;
                let totalFields = fields.length;
                
                fields.forEach(field => {
                    const hasRequired = field.hasAttribute('required');
                    const hasAriaRequired = field.hasAttribute('aria-required');
                    const hasAriaInvalid = field.hasAttribute('aria-invalid');
                    const hasAriaDescribedby = field.hasAttribute('aria-describedby');
                    
                    if (hasRequired && hasAriaRequired && hasAriaInvalid && hasAriaDescribedby) {
                        validFields++;
                    }
                });
                
                return {
                    success: validFields === totalFields,
                    score: validFields,
                    total: totalFields,
                    message: `${validFields}/${totalFields} champs ont des attributs ARIA valides`
                };
            }
            
            testContrastAndReadability() {
                // Test basique de contraste (v√©rification des styles CSS)
                const labels = this.form.querySelectorAll('label');
                let readableLabels = 0;
                let totalLabels = labels.length;
                
                labels.forEach(label => {
                    const style = window.getComputedStyle(label);
                    const color = style.color;
                    const backgroundColor = style.backgroundColor;
                    
                    // V√©rification basique (pour un test r√©el, il faudrait calculer le ratio de contraste)
                    if (color && backgroundColor && color !== backgroundColor) {
                        readableLabels++;
                    }
                });
                
                return {
                    success: readableLabels === totalLabels,
                    score: readableLabels,
                    total: totalLabels,
                    message: `${readableLabels}/${totalLabels} labels ont un contraste v√©rifiable`
                };
            }
            
            testResponsiveAndTouch() {
                // Test basique de responsive
                const fields = this.form.querySelectorAll('input, select, textarea');
                let responsiveFields = 0;
                let totalFields = fields.length;
                
                fields.forEach(field => {
                    const style = window.getComputedStyle(field);
                    const minHeight = parseInt(style.minHeight) || 0;
                    const fontSize = parseInt(style.fontSize) || 0;
                    
                    // V√©rification des bonnes pratiques pour mobile
                    if (minHeight >= 44 || fontSize >= 16) {
                        responsiveFields++;
                    }
                });
                
                return {
                    success: responsiveFields === totalFields,
                    score: responsiveFields,
                    total: totalFields,
                    message: `${responsiveFields}/${totalFields} champs respectent les bonnes pratiques mobile`
                };
            }
            
            displayTestResult(testName, result) {
                const testItem = document.createElement('div');
                testItem.className = `test-item ${result.success ? 'success' : 'error'}`;
                
                const status = result.success ? '‚úÖ' : '‚ùå';
                testItem.innerHTML = `
                    <strong>${status} ${testName}</strong><br>
                    <span>${result.message}</span><br>
                    <small>Score: ${result.score}/${result.total}</small>
                `;
                
                this.testResultsContent.appendChild(testItem);
                
                // Animation d'apparition
                testItem.style.opacity = '0';
                testItem.style.transform = 'translateY(20px)';
                testItem.style.transition = 'all 0.3s ease';
                
                setTimeout(() => {
                    testItem.style.opacity = '1';
                    testItem.style.transform = 'translateY(0)';
                }, 100);
            }
            
            handleSubmit(e) {
                e.preventDefault();
                
                // Test de validation
                const formData = new FormData(this.form);
                const errors = [];
                
                if (!formData.get('subject')) errors.push('Sujet du post');
                if (!formData.get('audience')) errors.push('Audience cible');
                if (!formData.get('tone')) errors.push('Ton du message');
                if (!formData.get('postLanguage')) errors.push('Langue du post');
                if (!formData.get('ollamaModel')) errors.push('Mod√®le IA');
                
                if (errors.length > 0) {
                    alert(`Veuillez remplir les champs suivants : ${errors.join(', ')}`);
                } else {
                    alert('‚úÖ Formulaire valide ! Tous les champs sont accessibles et fonctionnels.');
                }
            }
        }
        
        // Initialiser le testeur d'accessibilit√©
        document.addEventListener('DOMContentLoaded', () => {
            new AccessibilityTester();
        });
    </script>
</body>
</html>
