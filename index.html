<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Générez des posts LinkedIn percutants avec l'IA. Créez du contenu engageant adapté à votre audience en quelques clics.">
    <meta name="keywords" content="LinkedIn, posts, IA, contenu, marketing, réseaux sociaux">
    <meta name="author" content="LinkedINPost">
    <meta property="og:title" content="LinkedINPost - Créer un contenu LinkedIn impactant grâce à l'IA">
    <meta property="og:description" content="Générez des posts LinkedIn percutants avec l'IA">
    <meta property="og:type" content="website">
    
    <!-- Preload des ressources critiques -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="dns-prefetch" href="https://82.29.172.185">
    <link rel="dns-prefetch" href="https://xrypwaibendenjgqgazv.supabase.co">
    
    <!-- Supabase avec fallback -->
    <script src="https://unpkg.com/@supabase/supabase-js@2" defer></script>
    
    <title>LinkedINPost - Créer un contenu LinkedIn impactant grâce à l'IA</title>
    
    <!-- Styles de design corrigés -->
    <link rel="stylesheet" href="design-fixes.css">
    
    <!-- Corrections d'accessibilité pour les champs de saisie -->
    <link rel="stylesheet" href="accessibility-fixes.css">
    
    <style>
        /* Icônes SVG optimisées avec sprite system */
        .icon {
            display: inline-block;
            width: 1em;
            height: 1em;
            vertical-align: -0.125em;
            fill: currentColor;
            flex-shrink: 0;
        }
        
        .icon-lg { width: 3rem; height: 3rem; }
        .icon-xl { width: 4rem; height: 4rem; }
        
        /* ===== SYSTÈME DE DESIGN UNIFIÉ ET AMÉLIORÉ ===== */
        :root {
            /* ===== PALETTE DE COULEURS OPTIMISÉE ===== */
            --primary-color: #0077b5;
            --primary-light: #00a0dc;
            --primary-dark: #005885;
            --primary-hover: #005885;
            --secondary-color: #f39c12;
            --secondary-light: #f7b731;
            --accent-color: #8b5cf6;
            --accent-light: #a78bfa;
            --success-color: #10b981;
            --success-light: #34d399;
            --warning-color: #f59e0b;
            --warning-light: #fbbf24;
            --error-color: #ef4444;
            --error-light: #f87171;
            --info-color: #3b82f6;
            --info-light: #60a5fa;
            
            /* ===== SYSTÈME DE NEUTRES ENRICHIS ===== */
            --neutral-50: #fafafa;
            --neutral-100: #f5f5f5;
            --neutral-200: #e5e5e5;
            --neutral-300: #d4d4d4;
            --neutral-400: #a3a3a3;
            --neutral-500: #737373;
            --neutral-600: #525252;
            --neutral-700: #404040;
            --neutral-800: #262626;
            --neutral-900: #171717;
            --neutral-950: #0a0a0a;
            
            /* ===== THÈME CLAIR OPTIMISÉ ===== */
            --bg-primary: var(--neutral-50);
            --bg-secondary: var(--neutral-100);
            --bg-tertiary: var(--neutral-200);
            --bg-glass: rgba(255, 255, 255, 0.85);
            --bg-card: rgba(255, 255, 255, 0.95);
            --bg-elevated: rgba(255, 255, 255, 0.98);
            --text-primary: var(--neutral-900);
            --text-secondary: var(--neutral-600);
            --text-muted: var(--neutral-500);
            --text-accent: var(--primary-color);
            --border-color: var(--neutral-200);
            --border-light: var(--neutral-100);
            --border-focus: var(--primary-color);
            
            /* ===== SYSTÈME D'OMBRES ENRICHIS ===== */
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -1px rgb(0 0 0 / 0.06);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.05);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04);
            --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);
            --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.06);
            --shadow-glow: 0 0 20px rgba(0, 119, 181, 0.3);
            
            /* ===== GRADIENTS UNIFIÉS ET ENRICHIS ===== */
            --gradient-primary: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 50%, var(--accent-color) 100%);
            --gradient-secondary: linear-gradient(135deg, var(--secondary-color) 0%, var(--secondary-light) 50%, var(--warning-color) 100%);
            --gradient-accent: linear-gradient(135deg, var(--accent-color) 0%, var(--accent-light) 50%, var(--success-color) 100%);
            --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08));
            --gradient-hero: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 50%, var(--success-color) 100%);
            --gradient-card: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85));
            
            /* ===== SYSTÈME D'ESPACEMENT OPTIMISÉ ===== */
            --space-0: 0;
            --space-1: 0.25rem;   /* 4px */
            --space-2: 0.5rem;    /* 8px */
            --space-3: 0.75rem;   /* 12px */
            --space-4: 1rem;      /* 16px */
            --space-5: 1.25rem;   /* 20px */
            --space-6: 1.5rem;    /* 24px */
            --space-8: 2rem;      /* 32px */
            --space-10: 2.5rem;   /* 40px */
            --space-12: 3rem;     /* 48px */
            --space-16: 4rem;     /* 64px */
            --space-20: 5rem;     /* 80px */
            --space-24: 6rem;     /* 96px */
            --space-32: 8rem;     /* 128px */
            
            /* ===== SYSTÈME DE RAYONS ===== */
            --radius-none: 0;
            --radius-sm: 0.125rem;   /* 2px */
            --radius-md: 0.375rem;   /* 6px */
            --radius-lg: 0.5rem;     /* 8px */
            --radius-xl: 0.75rem;    /* 12px */
            --radius-2xl: 1rem;      /* 16px */
            --radius-3xl: 1.5rem;    /* 24px */
            --radius-full: 9999px;
            
            /* ===== SYSTÈME DE TRANSITIONS ===== */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-normal: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: 300ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
            
            /* ===== SYSTÈME DE Z-INDEX ===== */
            --z-dropdown: 1000;
            --z-sticky: 1020;
            --z-fixed: 1030;
            --z-modal-backdrop: 1040;
            --z-modal: 1050;
            --z-popover: 1060;
            --z-tooltip: 1070;
            --z-toast: 1080;
        }

        /* Thème sombre optimisé */
        [data-theme="dark"] {
            --bg-primary: var(--neutral-950);
            --bg-secondary: var(--neutral-900);
            --bg-tertiary: var(--neutral-800);
            --bg-glass: rgba(255, 255, 255, 0.05);
            --bg-card: rgba(255, 255, 255, 0.08);
            --text-primary: var(--neutral-50);
            --text-secondary: var(--neutral-300);
            --text-muted: var(--neutral-400);
            --border-color: var(--neutral-700);
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.4);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.4);
        }

        /* Reset CSS optimisé */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Optimisations de performance */
        html {
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }

        body {
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            transition: background-color var(--transition-normal), color var(--transition-normal);
            overflow-x: hidden;
        }

        /* Optimisations des images et médias */
        img, video, svg {
            max-width: 100%;
            height: auto;
            display: block;
        }

        /* Optimisations des formulaires */
        input, textarea, select, button {
            font-family: inherit;
            font-size: inherit;
            line-height: inherit;
        }

        /* Optimisations des liens */
        a {
            color: inherit;
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        a:hover {
            color: var(--primary-color);
        }

        /* Optimisations des boutons */
        button {
            cursor: pointer;
            border: none;
            background: none;
            transition: all var(--transition-fast);
        }

        button:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Optimisations des focus */
        :focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Optimisations des réductions de mouvement */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* Optimisations du contraste élevé */
        @media (prefers-contrast: high) {
            :root {
                --border-color: var(--text-primary);
                --shadow-sm: 0 1px 0 0 var(--text-primary);
                --shadow-md: 0 2px 0 0 var(--text-primary);
                --shadow-lg: 0 4px 0 0 var(--text-primary);
            }
        }
        
        /* Composants de base optimisés */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space-6);
        }
        
        /* Header optimisé avec glassmorphism */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            z-index: var(--z-fixed);
            padding: var(--space-4) 0;
            transition: all var(--transition-normal);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            text-decoration: none;
            transition: color var(--transition-fast);
        }
        
        .logo:hover {
            color: var(--primary-color);
        }
        
        .header-controls {
            display: flex;
            gap: var(--space-3);
            align-items: center;
        }
        
        .theme-toggle, .lang-toggle {
            background: var(--bg-glass);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-full);
            cursor: pointer;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all var(--transition-fast);
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        .theme-toggle:hover, .lang-toggle:hover {
            background: var(--bg-tertiary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        /* Main Content */
        main {
            margin-top: 80px;
            min-height: calc(100vh - 80px);
        }
        
        /* Glass Card optimisée et unifiée */
        .glass-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-2xl);
            padding: var(--space-8);
            margin: var(--space-8) 0;
            box-shadow: var(--shadow-lg);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }
        
        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-glass);
            opacity: 0.05;
            transition: opacity var(--transition-normal);
        }
        
        .glass-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
            background: var(--bg-card);
        }
        
        .glass-card:hover::before {
            opacity: 0.1;
        }
        
        .glass-card h2 {
            font-size: clamp(1.5rem, 3vw, 2rem);
            margin-bottom: var(--space-4);
            color: var(--text-primary);
            font-weight: 700;
            letter-spacing: -0.01em;
            position: relative;
            z-index: 1;
        }
        
        .glass-card p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: var(--space-6);
            position: relative;
            z-index: 1;
        }
        
        /* Responsive pour glass-card */
        @media (max-width: 768px) {
            .glass-card {
                padding: var(--space-6);
                margin: var(--space-6) 0;
            }
        }
        
        @media (max-width: 480px) {
            .glass-card {
                padding: var(--space-4);
                margin: var(--space-4) 0;
            }
        }
        
        /* Hero Section optimisée */
        .hero {
            text-align: center;
            padding: var(--space-20) 0;
            margin-bottom: var(--space-8);
            background: var(--gradient-primary);
            border-radius: var(--radius-3xl);
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-glass);
            opacity: 0.1;
        }
        
        .hero h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            margin-bottom: var(--space-6);
            color: var(--text-primary);
            font-weight: 800;
            letter-spacing: -0.02em;
            line-height: 1.1;
            position: relative;
            z-index: 1;
        }
        
        .hero p {
            font-size: clamp(1.1rem, 2.5vw, 1.3rem);
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto var(--space-8);
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }
        
        /* CTA Button optimisé */
        .cta-button {
            background: var(--gradient-primary);
            color: white;
            padding: var(--space-4) var(--space-8);
            border: none;
            border-radius: var(--radius-full);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-bounce);
            text-decoration: none;
            display: inline-block;
            position: relative;
            overflow: hidden;
            letter-spacing: -0.01em;
            box-shadow: var(--shadow-lg);
        }
        
        .cta-button:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: var(--shadow-xl);
        }
        
        .cta-button:active {
            transform: translateY(-2px) scale(1.02);
        }
        
        /* Formulaires optimisés */
        .form-group {
            margin-bottom: var(--space-6);
        }
        
        .form-group label {
            display: block;
            margin-bottom: var(--space-2);
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: var(--space-4);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all var(--transition-fast);
            font-family: inherit;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 119, 181, 0.1);
            background: var(--bg-secondary);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
            line-height: 1.6;
        }
        
        /* Bouton de génération optimisé */
        .generate-btn {
            background: var(--gradient-primary);
            color: white;
            padding: var(--space-4) var(--space-8);
            border: none;
            border-radius: var(--radius-xl);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: var(--space-6);
            transition: all var(--transition-bounce);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }
        
        .generate-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }
        
        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Loading spinner optimisé */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Résultat du post optimisé */
        .post-result {
            margin-top: var(--space-8);
            display: none;
        }
        
        .post-content {
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin-bottom: var(--space-4);
            white-space: pre-wrap;
            line-height: 1.8;
            color: var(--text-primary);
            box-shadow: var(--shadow-md);
            font-size: 1rem;
            max-height: 400px;
            overflow-y: auto;
        }
        
        /* Bouton de copie optimisé */
        .copy-btn {
            background: var(--gradient-secondary);
            color: white;
            padding: var(--space-3) var(--space-6);
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-weight: 500;
        }
        
        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 0 var(--space-4);
            }
            
            .hero {
                padding: var(--space-12) var(--space-4);
            }
            
            .header-controls {
                gap: var(--space-2);
            }
            
            .theme-toggle, .lang-toggle {
                padding: var(--space-2) var(--space-3);
                font-size: 0.85rem;
            }
        }
        
        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .cta-button {
                padding: var(--space-3) var(--space-6);
                font-size: 1rem;
            }
        }
        
        /* ===== STYLES D'AUTHENTIFICATION ===== */
        
        /* Container d'authentification avec gestion d'état */
        .auth-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-6);
            position: relative;
            background: var(--gradient-primary);
        }
        
        /* Pages d'authentification avec gestion d'état */
        .auth-page {
            display: none;
            width: 100%;
            max-width: 450px;
            animation: fadeInUp 0.5s ease-out;
        }
        
        .auth-page.active {
            display: block;
        }
        
        
        
        /* Animation de transition entre les pages */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Animation de sortie */
        .auth-page.fade-out {
            animation: fadeOutDown 0.3s ease-in forwards;
        }
        
        @keyframes fadeOutDown {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-20px);
            }
        }
        
        .auth-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(236, 72, 153, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(6, 182, 212, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 1;
        }
        
        .auth-card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-3xl);
            padding: var(--space-12);
            width: 100%;
            max-width: 450px;
            box-shadow: var(--shadow-xl);
            position: relative;
            z-index: 2;
            transition: all var(--transition-normal);
        }
        
        .auth-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl);
            background: var(--bg-card);
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: var(--space-8);
        }
        
        .auth-header h1 {
            color: var(--text-primary);
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: var(--space-3);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .auth-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .auth-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-6);
        }
        
        .auth-form .form-group {
            margin-bottom: 0;
        }
        
        .auth-form input {
            width: 100%;
            padding: var(--space-4);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all var(--transition-normal);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .auth-form input::placeholder {
            color: var(--text-muted);
            font-style: italic;
        }
        
        .auth-form input:focus {
            outline: none;
            border-color: var(--primary-color);
            background: var(--bg-secondary);
            box-shadow: 0 0 0 4px rgba(0, 119, 181, 0.15);
            transform: translateY(-2px);
        }
        
        .auth-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: var(--space-4) var(--space-8);
            border-radius: var(--radius-lg);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-bounce);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }
        
        .auth-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-secondary);
            transition: left var(--transition-slow);
            z-index: -1;
        }
        
        .auth-btn:hover::before {
            left: 0;
        }
        
        .auth-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }
        
        .auth-btn:active {
            transform: translateY(-1px);
        }
        
        .auth-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .auth-footer {
            text-align: center;
            margin-top: var(--space-8);
            padding-top: var(--space-6);
            border-top: 1px solid var(--border-color);
        }
        
        .auth-footer p {
            color: var(--text-secondary);
            margin-bottom: var(--space-3);
            font-size: 1rem;
        }
        
        .auth-link {
            color: var(--accent-color);
            text-decoration: none;
            font-weight: 600;
            transition: all var(--transition-fast);
            display: inline-block;
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-md);
            position: relative;
        }
        
        .auth-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--accent-color);
            transition: all var(--transition-normal);
            transform: translateX(-50%);
        }
        
        .auth-link:hover::after {
            width: 100%;
        }
        
        .auth-link:hover {
            color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .auth-error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-6);
            font-size: 0.95rem;
            text-align: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .auth-success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #10b981;
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-6);
            font-size: 0.95rem;
            text-align: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .auth-suggestion {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #3b82f6;
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-6);
            font-size: 0.95rem;
            text-align: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        /* ===== STYLES DU DASHBOARD ===== */
        
        .dashboard {
            display: none;
            min-height: 100vh;
            background: var(--bg-primary);
            transition: all var(--transition-normal);
            animation: slideInUp 0.6s ease-out;
        }
        
        .dashboard.active {
            display: block;
        }
        
        /* Animation d'entrée du dashboard */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ===== STYLES DU HEADER ===== */
        
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            z-index: var(--z-fixed);
            padding: var(--space-4) 0;
            transition: all var(--transition-normal);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space-6);
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--text-primary);
            text-decoration: none;
            transition: color var(--transition-fast);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .logo:hover {
            color: var(--primary-color);
        }
        
        .header-controls {
            display: flex;
            gap: var(--space-4);
            align-items: center;
        }
        
        .theme-toggle, .lang-toggle {
            background: var(--bg-glass);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-full);
            cursor: pointer;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all var(--transition-fast);
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: var(--space-2);
            min-width: 120px;
            justify-content: center;
        }
        
        .theme-toggle:hover, .lang-toggle:hover {
            background: var(--bg-tertiary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .logout-btn {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: var(--space-2);
            text-decoration: none;
        }
        
        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        /* ===== STYLES DU MAIN CONTENT ===== */
        
        main {
            margin-top: 80px;
            min-height: calc(100vh - 80px);
            padding: var(--space-8) 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--space-6);
        }
        
        /* ===== STYLES DES SECTIONS ===== */
        
        .hero {
            text-align: center;
            padding: var(--space-20) 0;
            margin-bottom: var(--space-8);
            background: var(--gradient-primary);
            border-radius: var(--radius-3xl);
            position: relative;
            overflow: hidden;
            color: white;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-glass);
            opacity: 0.1;
        }
        
        .hero h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            margin-bottom: var(--space-6);
            color: white;
            font-weight: 800;
            letter-spacing: -0.02em;
            line-height: 1.1;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .hero p {
            font-size: clamp(1.1rem, 2.5vw, 1.3rem);
            color: rgba(255, 255, 255, 0.95);
            max-width: 600px;
            margin: 0 auto var(--space-8);
            line-height: 1.6;
            position: relative;
            z-index: 1;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .cta-button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: var(--space-4) var(--space-8);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-full);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-bounce);
            text-decoration: none;
            display: inline-block;
            position: relative;
            overflow: hidden;
            letter-spacing: -0.01em;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .cta-button:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-4px) scale(1.05);
            box-shadow: var(--shadow-xl);
        }
        
        /* ===== STYLES DES FORMULAIRES ===== */
        
        .form-group {
            margin-bottom: var(--space-6);
        }
        
        .form-group label {
            display: block;
            margin-bottom: var(--space-2);
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: var(--space-4);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all var(--transition-fast);
            font-family: inherit;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(0, 119, 181, 0.1);
            background: var(--bg-secondary);
            transform: translateY(-2px);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
            line-height: 1.6;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-4);
        }
        
        /* ===== STYLES DES BOUTONS ===== */
        
        .generate-btn {
            background: var(--gradient-primary);
            color: white;
            padding: var(--space-4) var(--space-8);
            border: none;
            border-radius: var(--radius-xl);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: var(--space-6);
            transition: all var(--transition-bounce);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }
        
        .generate-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: var(--shadow-xl);
        }
        
        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* ===== STYLES DES RÉSULTATS ===== */
        
        .post-result {
            margin-top: var(--space-8);
            display: none;
        }
        
        .post-content {
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin-bottom: var(--space-4);
            white-space: pre-wrap;
            line-height: 1.8;
            color: var(--text-primary);
            box-shadow: var(--shadow-md);
            font-size: 1rem;
            max-height: 400px;
            overflow-y: auto;
        }
        
        /* ===== STYLES DU LOADING ===== */
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ===== STYLES OLLAMA ===== */
        
        .ollama-status-display {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-md);
            font-size: 0.9rem;
            font-weight: 500;
            transition: all var(--transition-fast);
        }
        
        .status-indicator.checking {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        .status-indicator.connected {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .status-indicator.disconnected {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .status-indicator .icon {
            width: 1rem;
            height: 1rem;
        }
        
        .model-info {
            margin-top: var(--space-2);
            padding: var(--space-2);
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            border-left: 3px solid var(--primary-color);
        }
        
        .model-info small {
            display: block;
            line-height: 1.4;
        }
        
        .text-muted {
            color: var(--text-muted);
        }
        
        /* ===== STYLES RESPONSIVE ===== */
        
        @media (max-width: 768px) {
            .container {
                padding: 0 var(--space-4);
            }
            
            .glass-card {
                padding: var(--space-6);
                margin: var(--space-6) 0;
            }
            
            .hero {
                padding: var(--space-12) var(--space-4);
            }
            
            .header-controls {
                gap: var(--space-2);
            }
            
            .theme-toggle, .lang-toggle {
                padding: var(--space-2) var(--space-3);
                font-size: 0.85rem;
                min-width: 100px;
            }
            
            .auth-card {
                padding: var(--space-8);
                margin: 0 var(--space-4);
            }
        }
        
        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .glass-card {
                padding: var(--space-4);
                margin: var(--space-4) 0;
            }
            
            .cta-button {
                padding: var(--space-3) var(--space-6);
                font-size: 1rem;
            }
            
            .auth-card {
                padding: var(--space-6);
                margin: 0 var(--space-2);
            }
            
            .header-content {
                padding: 0 var(--space-4);
            }
            
            .logo {
                font-size: 1.5rem;
            }
        }
        
        /* Bouton de publication LinkedIn */
        .publish-btn {
            background: var(--gradient-primary);
            color: white;
            padding: var(--space-3) var(--space-6);
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-weight: 500;
            margin-left: var(--space-3);
        }
        
        .publish-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .publish-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            pointer-events: none;
        }
        
        .publish-btn.active {
            opacity: 1 !important;
            cursor: pointer !important;
            pointer-events: auto !important;
            display: inline-flex !important;
        }
        
        .publish-btn:not(:disabled) {
            pointer-events: auto !important;
            cursor: pointer !important;
        }
        
        /* Bouton de profil */
        .profile-btn {
            background: var(--bg-glass);
            color: var(--text-primary);
            padding: var(--space-2) var(--space-4);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-size: 0.9rem;
            font-weight: 500;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .profile-btn:hover {
            background: var(--bg-tertiary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        /* Modal de profil LinkedIn */
        .profile-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            animation: fadeIn 0.3s ease-out;
        }
        
        .profile-modal-content {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border-color);
            animation: slideInUp 0.3s ease-out;
        }
        
        .profile-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-6);
            padding-bottom: var(--space-4);
            border-bottom: 1px solid var(--border-color);
        }
        
        .profile-modal-header h2 {
            margin: 0;
            color: var(--text-primary);
            font-size: 1.5rem;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: var(--space-2);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }
        
        .close-btn:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }
        
        .profile-modal-body .form-group {
            margin-bottom: var(--space-4);
        }
        
        .profile-modal-body .form-group label {
            display: block;
            margin-bottom: var(--space-2);
            color: var(--text-primary);
            font-weight: 500;
        }
        
        .profile-modal-body .form-group input {
            width: 100%;
            padding: var(--space-3);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all var(--transition-fast);
        }
        
        .profile-modal-body .form-group input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-actions {
            display: flex;
            gap: var(--space-3);
            margin-top: var(--space-6);
        }
        
        .save-btn, .cancel-btn {
            padding: var(--space-3) var(--space-6);
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        .save-btn {
            background: var(--gradient-primary);
            color: white;
        }
        
        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .cancel-btn {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        
        .cancel-btn:hover {
            background: var(--bg-secondary);
        }
        
        /* Animations pour le modal */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideInUp {
            from { 
                opacity: 0;
                transform: translateY(30px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Animations pour les notifications */
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideOutRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }
        
        /* Animations pour les notifications en bas */
        @keyframes slideInBottomRight {
            from {
                opacity: 0;
                transform: translateX(100%) translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0) translateY(0);
            }
        }
        
        @keyframes slideOutBottomRight {
            from {
                opacity: 1;
                transform: translateX(0) translateY(0);
            }
            to {
                opacity: 0;
                transform: translateX(100%) translateY(20px);
            }
        }
        
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
    </style>
</head>
<body data-theme="light">
    <!-- Container d'authentification avec gestion d'état -->
    <div class="auth-container" id="authContainer">
        <!-- Page de connexion -->
        <div class="page auth-page" id="loginPage" data-page="login">
            <div class="auth-card">
                <div class="auth-header">
                    <h1 id="loginTitle">Connexion</h1>
                    <p id="loginSubtitle">Accédez à votre espace LinkedINPost</p>
                </div>
                
                <div id="loginError" class="auth-error" style="display: none;"></div>
                <div id="loginSuggestion" class="auth-suggestion" style="display: none;"></div>
                
                <form class="auth-form" id="loginForm">
                    <div class="form-group">
                        <input type="email" id="loginEmail" placeholder="Adresse email" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="loginPassword" placeholder="Mot de passe" required>
                    </div>
                    <button type="submit" class="auth-btn" id="loginBtn">
                        <span id="loginBtnText">Se connecter</span>
                    </button>
                </form>
                
                <div class="auth-footer">
                    <p id="loginFooterText">Pas encore de compte ?</p>
                    <a href="#" class="auth-link" id="showSignupLink">Créer un compte</a>
                </div>
            </div>
        </div>

        <!-- Page d'inscription -->
        <div class="page auth-page" id="signupPage" data-page="signup">
            <div class="auth-card">
                <div class="auth-header">
                    <h1 id="signupTitle">Inscription</h1>
                    <p id="signupSubtitle">Créez votre compte LinkedINPost</p>
                </div>
                
                <div id="signupError" class="auth-error" style="display: none;"></div>
                <div id="signupSuggestion" class="auth-suggestion" style="display: none;"></div>
                <div id="signupSuccess" class="auth-success" style="display: none;"></div>
                
                <form class="auth-form" id="signupForm">
                    <div class="form-group">
                        <input type="text" id="signupName" placeholder="Nom complet" required>
                    </div>
                    <div class="form-group">
                        <input type="email" id="signupEmail" placeholder="Adresse email" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="signupPassword" placeholder="Mot de passe (min. 6 caractères)" required minlength="6">
                    </div>
                    <button type="submit" class="auth-btn" id="signupBtn">
                        <span id="signupBtnText">Créer mon compte</span>
                    </button>
                </form>
                
                <div class="auth-footer">
                    <p id="signupFooterText">Déjà un compte ?</p>
                    <a href="#" class="auth-link" id="showLoginLink">Se connecter</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard (contenu existant) -->
    <div class="dashboard" id="dashboard">
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <div class="logo">LinkedINPost</div>
                    <div class="header-controls">
                        <select class="lang-toggle" id="languageSelector">
                            <option value="fr">Français</option>
                            <option value="en">English</option>
                        </select>
                        <button class="profile-btn" id="profileBtn" onclick="app?.showProfileModal()">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                            <span id="profileText">Profil</span>
                            <span class="profile-status" id="profileStatus" style="
                                display: inline-block;
                                width: 8px;
                                height: 8px;
                                border-radius: 50%;
                                margin-left: 8px;
                                background: #ccc;
                            "></span>
                        </button>
                        <button class="theme-toggle" id="themeToggle">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                            </svg>
                            <span>Mode sombre</span>
                        </button>
                        <button class="action-btn" id="logoutBtn">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5z"/>
                            </svg>
                            <span id="logoutText">Déconnexion</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <main>
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <h1 id="heroTitle">Créer un contenu LinkedIn impactant grâce à l'IA</h1>
                <p id="heroDescription">Générez des posts LinkedIn percutants en quelques clics. Notre IA vous aide à créer du contenu engageant adapté à votre audience et vos objectifs.</p>

            </div>
        </section>

        <div class="container">
            <!-- Comment ça marche -->
            <section class="glass-card how-it-works fade-in">
                <h2 id="howItWorksTitle">Comment ça marche ?</h2>
                <p id="howItWorksDescription">Sélectionnez simplement votre sujet, votre audience cible et le ton souhaité. Notre IA génère instantanément un post LinkedIn optimisé pour maximiser l'engagement et refléter votre expertise professionnelle.</p>
            </section>

            <!-- Générateur de posts -->
            <section class="glass-card post-generator fade-in" id="generator">
                <div class="tab-container" role="tablist" aria-label="Navigation des fonctionnalités">
                    <div class="tab-header">
                        <button class="tab-btn active" 
                                data-tab="create" 
                                id="createTabBtn"
                                role="tab"
                                aria-selected="true"
                                aria-controls="createTab"
                                aria-label="Créer un nouveau post LinkedIn">
                            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                            </svg>
                            <span id="createTabTitle">Créer un post</span>
                        </button>
                        <button class="tab-btn" 
                                data-tab="saved" 
                                id="savedTabBtn"
                                role="tab"
                                aria-selected="false"
                                aria-controls="savedTab"
                                aria-label="Voir mes posts sauvegardés">
                            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
                            </svg>
                            <span id="savedTabTitle">Mes posts</span>
                            <span class="post-count" id="postCount" aria-label="Nombre de posts sauvegardés">0</span>
                        </button>
                    </div>
                    
                    <div class="tab-content">
                        <!-- Onglet Créer un post -->
                        <div class="tab-pane active" 
                             id="createTab" 
                             role="tabpanel" 
                             aria-labelledby="createTabBtn"
                             aria-label="Interface de création de post LinkedIn">
                            <h2 id="generatorTitle">Générateur de posts LinkedIn</h2>
                            
                            <form id="postForm" role="form" aria-labelledby="generatorTitle" novalidate>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="subject" id="subjectLabel">Sujet du post <span class="required" aria-label="Champ obligatoire">*</span></label>
                            <textarea id="subject" name="subject" required 
                                     rows="3" 
                                     placeholder="Décrivez le sujet de votre post LinkedIn en quelques lignes..."
                                     aria-describedby="subject-help"
                                     aria-required="true"
                                     aria-invalid="false"
                                     aria-label="Zone de texte pour décrire le sujet de votre post LinkedIn"
                                     tabindex="0"
                                     autocomplete="off"
                                     spellcheck="true"></textarea>
                            <div id="subject-help" class="field-help" role="tooltip" aria-hidden="false">
                                Par exemple : votre expertise, une réflexion professionnelle, une actualité de votre secteur, etc.
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="audience" id="audienceLabel">Audience cible <span class="required" aria-label="Champ obligatoire">*</span></label>
                            <select id="audience" name="audience" required 
                                    aria-describedby="audience-help"
                                    aria-required="true"
                                    aria-invalid="false"
                                    aria-label="Menu déroulant pour sélectionner l'audience cible"
                                    tabindex="0">
                                <option value="" aria-label="Option par défaut - Choisir une audience">Choisir une audience...</option>
                                <option value="professionals" aria-label="Professionnels expérimentés">Professionnels expérimentés</option>
                                <option value="juniors" aria-label="Jeunes professionnels">Jeunes professionnels</option>
                                <option value="entrepreneurs" aria-label="Entrepreneurs">Entrepreneurs</option>
                                <option value="managers" aria-label="Managers et dirigeants">Managers et dirigeants</option>
                                <option value="students" aria-label="Étudiants">Étudiants</option>
                                <option value="recruiters" aria-label="Recruteurs RH">Recruteurs RH</option>
                            </select>
                            <div id="audience-help" class="field-help" role="tooltip" aria-hidden="false">
                                Sélectionnez le type de professionnels que vous souhaitez cibler avec votre post
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="tone" id="toneLabel">Ton du message <span class="required" aria-label="Champ obligatoire">*</span></label>
                            <select id="tone" name="tone" required 
                                    aria-describedby="tone-help"
                                    aria-required="true"
                                    aria-invalid="false"
                                    aria-label="Menu déroulant pour sélectionner le ton du message"
                                    tabindex="0">
                                <option value="" aria-label="Option par défaut - Choisir un ton">Choisir un ton...</option>
                                <option value="professional" aria-label="Ton professionnel">Professionnel</option>
                                <option value="inspirational" aria-label="Ton inspirant">Inspirant</option>
                                <option value="casual" aria-label="Ton décontracté">Décontracté</option>
                                <option value="educational" aria-label="Ton éducatif">Éducatif</option>
                                <option value="motivational" aria-label="Ton motivant">Motivant</option>
                                <option value="thoughtful" aria-label="Ton réfléchi">Réfléchi</option>
                            </select>
                            <div id="tone-help" class="field-help" role="tooltip" aria-hidden="false">
                                Définissez l'ambiance et le style de votre message LinkedIn
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="postLanguage" id="postLanguageLabel">Langue du post <span class="required" aria-label="Champ obligatoire">*</span></label>
                            <select id="postLanguage" name="postLanguage" required 
                                    aria-describedby="language-help"
                                    aria-required="true"
                                    aria-invalid="false"
                                    aria-label="Menu déroulant pour sélectionner la langue du post"
                                    tabindex="0">
                                <option value="fr" aria-label="Français">Français</option>
                                <option value="en" aria-label="English">English</option>
                            </select>
                            <div id="language-help" class="field-help" role="tooltip" aria-hidden="false">
                                Choisissez la langue dans laquelle votre post sera généré
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="ollamaModel" id="ollamaModelLabel">Modèle IA <span class="required" aria-label="Champ obligatoire">*</span></label>
                            <select id="ollamaModel" name="ollamaModel" required 
                                    aria-describedby="model-help"
                                    aria-required="true"
                                    aria-invalid="false"
                                    aria-label="Menu déroulant pour sélectionner le modèle d'intelligence artificielle"
                                    tabindex="0">
                                <option value="" aria-label="Option par défaut - Chargement des modèles">Chargement des modèles...</option>
                            </select>
                            <div id="model-help" class="field-help" role="tooltip" aria-hidden="false">
                                Sélectionnez le modèle d'intelligence artificielle qui générera votre post
                            </div>
                            <div class="model-info" id="modelInfo" style="display: none;" role="status" aria-live="polite">
                                <small class="text-muted">
                                    <span id="modelDescription"></span>
                                    <span id="modelSize"></span>
                                </small>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="ollamaStatus" id="ollamaStatusLabel">Statut du serveur</label>
                            <div class="ollama-status-display" id="ollamaStatusDisplay" role="status" aria-live="polite">
                                <div class="status-indicator checking">
                                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                                        <path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2zm0 18a8 8 0 0 1-8-8 8 8 0 0 1 8-8 8 8 0 0 1 8 8 8 8 0 0 1-8 8z"/>
                                        <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" fill="none"/>
                                    </svg>
                                    <span>Vérification de la connectivité...</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="generate-btn" id="generateBtn" 
                            aria-describedby="generate-help"
                            aria-label="Générer un post LinkedIn avec l'IA">
                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2zm0 18a8 8 0 0 1-8-8 8 8 0 0 1 8-8 8 8 0 0 1 8 8 8 8 0 0 1-8 8z"/>
                            <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        <span id="generateBtnText">Générer mon post LinkedIn</span>
                    </button>
                    <div id="generate-help" class="field-help" role="tooltip">
                        Cliquez pour générer votre post LinkedIn avec l'intelligence artificielle
                    </div>
                </form>

                <!-- Résultat -->
                <div class="post-result" id="postResult" role="region" aria-live="polite" aria-labelledby="resultTitle">
                    <h3 id="resultTitle">Votre post LinkedIn :</h3>
                    <div class="post-content" id="postContent" 
                         role="textbox" 
                         aria-readonly="true" 
                         tabindex="0"
                         aria-describedby="post-content-help"></div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button class="action-button" id="publishLinkedInBtn" style="display: none;" aria-label="Publier le post sur votre profil LinkedIn">
                            <div class="button-icon publish">
                                <svg fill="currentColor" viewBox="0 0 24 24" style="color: white; width: 28px; height: 28px;">
                                    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.064-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path>
                                </svg>
                            </div>
                            <span class="button-text" id="publishBtnText">Publier sur LinkedIn</span>
                        </button>
                    </div>

                </div>
                        </div>
                        
                        <!-- Onglet Mes posts -->
                        <div class="tab-pane" 
                             id="savedTab" 
                             role="tabpanel" 
                             aria-labelledby="savedTabBtn"
                             aria-label="Gestion des posts sauvegardés">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                                <h2 id="savedPostsTitle">Mes posts sauvegardés</h2>
                                <div class="saved-posts-actions" role="group" aria-label="Actions sur les posts sauvegardés">
                                    <label for="searchPosts" class="sr-only">Rechercher dans mes posts</label>
                                    <input type="text" 
                                           id="searchPosts" 
                                           placeholder="Rechercher dans mes posts..." 
                                           aria-describedby="search-help"
                                           style="padding: 0.5rem; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white; margin-right: 1rem;">
                                    <div id="search-help" class="sr-only">Tapez des mots-clés pour filtrer vos posts sauvegardés</div>
                                    
                                    <button class="action-btn" 
                                            id="exportBtn"
                                            aria-describedby="export-help"
                                            aria-label="Exporter tous les posts sauvegardés">
                                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                        </svg>
                                        <span id="exportText">Exporter</span>
                                    </button>
                                    <div id="export-help" class="sr-only">Télécharge tous vos posts sauvegardés au format JSON</div>
                                    
                                    <input type="file" id="importFile" accept=".json" style="display: none;" aria-describedby="import-help">
                                    <button class="action-btn" 
                                            id="importBtn"
                                            aria-describedby="import-help"
                                            aria-label="Importer des posts depuis un fichier">
                                        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                        </svg>
                                        <span id="importText">Importer</span>
                                    </button>
                                    <div id="import-help" class="sr-only">Importe des posts depuis un fichier JSON précédemment exporté</div>
                                </div>
                            </div>
                            
                            <div class="saved-posts-container" 
                                 id="savedPostsContainer" 
                                 role="region" 
                                 aria-labelledby="savedPostsTitle"
                                 aria-live="polite">
                                <div class="empty-state" 
                                     id="emptyState" 
                                     role="status" 
                                     aria-live="polite">
                                    <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                                        <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
                                    </svg>
                                    <h3 id="emptyStateTitle">Aucun post sauvegardé</h3>
                                    <p id="emptyStateDescription">Créez votre premier post et sauvegardez-le pour le retrouver ici.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Avantages -->
            <section class="glass-card fade-in">
                <h2 id="benefitsTitle">Pourquoi utiliser LinkedINPost ?</h2>
                <div class="benefits-grid">
                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <svg class="icon icon-xl" viewBox="0 0 24 24">
                                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                            </svg>
                        </div>
                        <h3 id="benefit1Title">Augmentez votre visibilité</h3>
                        <p id="benefit1Description">Des posts optimisés pour l'algorithme LinkedIn qui maximisent votre portée et votre engagement.</p>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <svg class="icon icon-xl" viewBox="0 0 24 24">
                                <path d="M13 2.05v2.02c4.39.54 7.5 4.53 6.96 8.92-.46 3.64-3.32 6.5-6.96 6.96v2.02c5.5-.55 9.5-5.43 8.95-10.93C21.45 6.37 17.63 2.55 13 2.05zm-2 0C6.5 2.55 2.5 7.43 3.05 12.93c.5 4.67 4.32 8.49 9 8.99v-2.02c-3.64-.46-6.5-3.32-6.96-6.96C4.55 8.55 7.66 4.56 12 4.02V2.05h-1z"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                        </div>
                        <h3 id="benefit2Title">Gagnez du temps</h3>
                        <p id="benefit2Description">Créez du contenu professionnel en quelques secondes au lieu de passer des heures à rédiger.</p>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <svg class="icon icon-xl" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                        </div>
                        <h3 id="benefit3Title">Renforcez votre autorité</h3>
                        <p id="benefit3Description">Partagez du contenu de qualité qui établit votre expertise dans votre domaine.</p>
                    </div>
                </div>
            </section>

            <!-- Témoignages -->
            <section class="glass-card fade-in">
                <h2 id="testimonialsTitle">Ce qu'ils pensent de LinkedINPost</h2>
                <div class="testimonials-grid">
                    <div class="testimonial">
                        <div class="testimonial-avatar">M</div>
                        <p class="testimonial-text" id="testimonial1">"LinkedINPost m'a permis d'augmenter mon engagement de 300% en quelques semaines. Un outil indispensable !"</p>
                        <div class="testimonial-author">Marie Dubois, Marketing Manager</div>
                    </div>
                    <div class="testimonial">
                        <div class="testimonial-avatar">J</div>
                        <p class="testimonial-text" id="testimonial2">"Fini le syndrome de la page blanche ! Je crée maintenant du contenu LinkedIn de qualité tous les jours."</p>
                        <div class="testimonial-author">Jean Martin, Consultant</div>
                    </div>
                    <div class="testimonial">
                        <div class="testimonial-avatar">S</div>
                        <p class="testimonial-text" id="testimonial3">"Un gain de temps considérable et des résultats impressionnants. Je recommande vivement !"</p>
                        <div class="testimonial-author">Sophie Chen, Entrepreneure</div>
                    </div>
                </div>
            </section>


        </div>
        </main>

        <!-- Footer -->
        <footer class="fade-in">
            <div class="container">
                <p id="footerText">&copy; 2024 LinkedINPost. Créé avec <span aria-label="amour">❤️</span> pour les professionnels ambitieux.</p>
            </div>
        </footer>
    </div>

    <script>
        // Données de traduction
        const translations = {
            fr: {
                heroTitle: "Créer un contenu LinkedIn impactant grâce à l'IA",
                heroDescription: "Générez des posts LinkedIn percutants en quelques clics. Notre IA vous aide à créer du contenu engageant adapté à votre audience et vos objectifs.",

                howItWorksTitle: "Comment ça marche ?",
                howItWorksDescription: "Sélectionnez simplement votre sujet, votre audience cible et le ton souhaité. Notre IA génère instantanément un post LinkedIn optimisé pour maximiser l'engagement et refléter votre expertise professionnelle.",
                generatorTitle: "Générateur de posts LinkedIn",
                subjectLabel: "Sujet du post",
                audienceLabel: "Audience cible",
                toneLabel: "Ton du message",
                postLanguageLabel: "Langue du post",
                generateBtnText: "Générer mon post LinkedIn",
                resultTitle: "Votre post LinkedIn :",
                publishBtnText: "Publier le Post sur votre LinkedIn",
                publishingText: "Publication en cours...",
                publishSuccessText: "Post publié avec succès sur LinkedIn !",
                publishErrorText: "Erreur lors de la publication. Vérifiez vos informations de connexion.",
                benefitsTitle: "Pourquoi utiliser LinkedINPost ?",
                benefit1Title: "Augmentez votre visibilité",
                benefit1Description: "Des posts optimisés pour l'algorithme LinkedIn qui maximisent votre portée et votre engagement.",
                benefit2Title: "Gagnez du temps",
                benefit2Description: "Créez du contenu professionnel en quelques secondes au lieu de passer des heures à rédiger.",
                benefit3Title: "Renforcez votre autorité",
                benefit3Description: "Partagez du contenu de qualité qui établit votre expertise dans votre domaine.",
                testimonialsTitle: "Ce qu'ils pensent de LinkedINPost",
                testimonial1: "\"LinkedINPost m'a permis d'augmenter mon engagement de 300% en quelques semaines. Un outil indispensable !\"",
                testimonial2: "\"Fini le syndrome de la page blanche ! Je crée maintenant du contenu LinkedIn de qualité tous les jours.\"",
                testimonial3: "\"Un gain de temps considérable et des résultats impressionnants. Je recommande vivement !\"",

                footerText: "© 2024 LinkedINPost. Créé avec ❤️ pour les professionnels ambitieux.",
                themeToggleLight: "Mode sombre",
                themeToggleDark: "Mode clair",
                createTabTitle: "Créer un post",
                savedTabTitle: "Mes posts",
                savedPostsTitle: "Mes posts sauvegardés",

                emptyStateTitle: "Aucun post sauvegardé",
                emptyStateDescription: "Créez votre premier post et sauvegardez-le pour le retrouver ici.",
                exportText: "Exporter",
                importText: "Importer",
                loginTitle: "Connexion",
                loginSubtitle: "Accédez à votre espace LinkedINPost",
                loginBtnText: "Se connecter",
                loginFooterText: "Pas encore de compte ?",
                signupTitle: "Inscription",
                signupSubtitle: "Créez votre compte LinkedINPost",
                signupBtnText: "Créer mon compte",
                signupFooterText: "Déjà un compte ?",
                logoutText: "Déconnexion",
                emailPlaceholder: "Adresse email",
                passwordPlaceholder: "Mot de passe",
                namePlaceholder: "Nom complet",
                passwordSignupPlaceholder: "Mot de passe (min. 6 caractères)",
                ollamaModelLabel: "Modèle IA",
                ollamaStatusLabel: "Statut du serveur",
                modelLoadingText: "Chargement des modèles...",
                modelDescription: "Modèle d'IA pour la génération de contenu",
                modelSize: "Taille du modèle",
                statusChecking: "Vérification de la connectivité...",
                statusConnected: "Serveur connecté",
                statusDisconnected: "Serveur non accessible",

                profileText: "Profil",
                profileModalTitle: "Profil LinkedIn",
                linkedinEmailLabel: "Email LinkedIn",
                linkedinPasswordLabel: "Mot de passe LinkedIn",
                linkedinProfileUrlLabel: "URL de votre profil LinkedIn (optionnel)",
                saveProfileText: "Sauvegarder",
                cancelProfileText: "Annuler",
                publishingText: "Publication...",
                publishSuccessText: "Post publié avec succès sur LinkedIn !",
                publishErrorText: "Erreur lors de la publication sur LinkedIn.",
                noContentText: "Aucun contenu à publier. Générez d'abord un post.",
                emptyContentText: "Le contenu du post est vide.",
                configureProfileText: "Veuillez d'abord configurer votre profil LinkedIn dans les paramètres."
            },
            en: {
                heroTitle: "Create impactful LinkedIn content with AI",
                heroDescription: "Generate compelling LinkedIn posts in just a few clicks. Our AI helps you create engaging content tailored to your audience and objectives.",

                howItWorksTitle: "How it works?",
                howItWorksDescription: "Simply select your topic, target audience, and desired tone. Our AI instantly generates an optimized LinkedIn post to maximize engagement and reflect your professional expertise.",
                generatorTitle: "LinkedIn Post Generator",
                subjectLabel: "Post subject",
                audienceLabel: "Target audience",
                toneLabel: "Message tone",
                postLanguageLabel: "Post language",
                generateBtnText: "Generate my LinkedIn post",
                resultTitle: "Your LinkedIn post:",
                publishBtnText: "Publish Post to your LinkedIn",
                publishingText: "Publishing...",
                publishSuccessText: "Post published successfully on LinkedIn!",
                publishErrorText: "Error during publication. Check your login credentials.",
                benefitsTitle: "Why use LinkedINPost?",
                benefit1Title: "Increase your visibility",
                benefit1Description: "Posts optimized for LinkedIn's algorithm that maximize your reach and engagement.",
                benefit2Title: "Save time",
                benefit2Description: "Create professional content in seconds instead of spending hours writing.",
                benefit3Title: "Strengthen your authority",
                benefit3Description: "Share quality content that establishes your expertise in your field.",
                testimonialsTitle: "What our users say",
                testimonial1: "\"LinkedINPost helped me increase my engagement by 300% in just a few weeks. An essential tool!\"",
                testimonial2: "\"No more writer's block! I now create quality LinkedIn content every day.\"",
                testimonial3: "\"A considerable time saver with impressive results. I highly recommend it!\"",

                footerText: "© 2024 LinkedINPost. Made with ❤️ for ambitious professionals.",
                themeToggleLight: "Dark mode",
                themeToggleDark: "Light mode",
                createTabTitle: "Create post",
                savedTabTitle: "My posts",
                savedPostsTitle: "My saved posts",

                emptyStateTitle: "No saved posts",
                emptyStateDescription: "Create your first post and save it to find it here.",
                exportText: "Export",
                importText: "Import",
                loginTitle: "Login",
                loginSubtitle: "Access your LinkedINPost workspace",
                loginBtnText: "Sign in",
                loginFooterText: "Don't have an account?",
                signupTitle: "Sign up",
                signupSubtitle: "Create your LinkedINPost account",
                signupBtnText: "Create account",
                signupFooterText: "Already have an account?",
                logoutText: "Logout",
                emailPlaceholder: "Email address",
                passwordPlaceholder: "Password",
                namePlaceholder: "Full name",
                passwordSignupPlaceholder: "Password (min. 6 characters)",
                ollamaModelLabel: "AI Model",
                ollamaStatusLabel: "Server Status",
                modelLoadingText: "Loading models...",
                modelDescription: "AI model for content generation",
                modelSize: "Model size",
                statusChecking: "Checking connectivity...",
                statusConnected: "Server connected",
                statusDisconnected: "Server unavailable",

                profileText: "Profile",
                profileModalTitle: "LinkedIn Profile",
                linkedinEmailLabel: "LinkedIn Email",
                linkedinPasswordLabel: "LinkedIn Password",
                linkedinProfileUrlLabel: "Your LinkedIn Profile URL (optional)",
                saveProfileText: "Save",
                cancelProfileText: "Cancel",
                publishingText: "Publishing...",
                publishSuccessText: "Post published successfully on LinkedIn!",
                publishErrorText: "Error publishing to LinkedIn.",
                noContentText: "No content to publish. Generate a post first.",
                emptyContentText: "Post content is empty.",
                configureProfileText: "Please configure your LinkedIn profile in settings first."
            }
        };

        // Templates de posts
        const postTemplates = {
            innovation: {
                fr: {
                    professional: "🚀 L'innovation technologique redéfinit notre façon de travailler.\n\nAujourd'hui, les entreprises qui n'embrassent pas le changement risquent de se faire distancer. Voici 3 tendances à surveiller :\n\n• Intelligence artificielle générative\n• Automatisation des processus\n• Collaboration hybride\n\nQuelle innovation a le plus transformé votre secteur cette année ?\n\n#Innovation #Technologie #Transformation",
                    inspirational: "✨ L'innovation naît de l'audace de rêver différemment.\n\nChaque grande révolution technologique a commencé par une idée \"impossible\". Steve Jobs avec l'iPhone, Elon Musk avec Tesla...\n\nVotre prochaine idée pourrait changer le monde.\n\nN'ayez pas peur de penser en dehors des sentiers battus. L'innovation récompense les audacieux.\n\nQuelle idée \"impossible\" portez-vous en vous ?\n\n#Innovation #Inspiration #Entrepreneuriat",
                    casual: "💡 On parle d'innovation, mais concrètement, ça veut dire quoi ?\n\nPour moi, c'est simple : résoudre un vrai problème avec une solution élégante.\n\nPas besoin de révolutionner le monde du jour au lendemain. Parfois, une petite amélioration peut avoir un impact énorme.\n\nVous avez un exemple d'innovation simple mais géniale ?\n\n#Innovation #Simplicité #Impact"
                },
                en: {
                    professional: "🚀 Technological innovation is redefining how we work.\n\nToday, companies that don't embrace change risk being left behind. Here are 3 trends to watch:\n\n• Generative artificial intelligence\n• Process automation\n• Hybrid collaboration\n\nWhich innovation has most transformed your industry this year?\n\n#Innovation #Technology #Transformation",
                    inspirational: "✨ Innovation is born from the audacity to dream differently.\n\nEvery great technological revolution started with an \"impossible\" idea. Steve Jobs with the iPhone, Elon Musk with Tesla...\n\nYour next idea could change the world.\n\nDon't be afraid to think outside the box. Innovation rewards the bold.\n\nWhat \"impossible\" idea do you carry within you?\n\n#Innovation #Inspiration #Entrepreneurship",
                    casual: "💡 We talk about innovation, but what does it actually mean?\n\nFor me, it's simple: solving a real problem with an elegant solution.\n\nNo need to revolutionize the world overnight. Sometimes a small improvement can have huge impact.\n\nDo you have an example of simple but brilliant innovation?\n\n#Innovation #Simplicity #Impact",
                    educational: "📚 Innovation isn't just about technology - it's about mindset.\n\nHere are 3 key principles I've learned:\n\n• Question assumptions regularly\n• Embrace failure as learning\n• Focus on user problems, not solutions\n\nWhich principle resonates most with your experience?\n\n#Innovation #Learning #Growth",
                    thoughtful: "🤔 True innovation often comes from constraints, not unlimited resources.\n\nSome of history's greatest breakthroughs happened because someone had to work within limitations.\n\nConstraints force creativity. They make us think differently.\n\nWhat constraint in your work has led to your most creative solution?\n\n#Innovation #Creativity #Constraints"
                }
            },
            leadership: {
                fr: {
                    professional: "👥 Le leadership moderne ne se résume pas à donner des ordres.\n\nC'est inspirer, accompagner et créer un environnement où chacun peut exceller.\n\nLes meilleurs leaders que j'ai rencontrés partagent 3 qualités :\n\n• Écoute active\n• Vulnérabilité assumée\n• Vision claire\n\nQuelle qualité de leadership vous semble la plus importante ?\n\n#Leadership #Management #Équipe",
                    inspirational: "🌟 Un vrai leader ne crée pas des suiveurs, il crée d'autres leaders.\n\nJ'ai appris que la grandeur d'un leader se mesure à sa capacité à élever les autres.\n\nChaque interaction est une opportunité de:\n• Inspirer confiance\n• Transmettre des valeurs\n• Révéler le potentiel\n\nVous souvenez-vous d'un leader qui a transformé votre vision ?\n\n#Leadership #Inspiration #Développement",
                    motivational: "💪 Le leadership commence par se diriger soi-même.\n\nAvant d'inspirer les autres, maîtrisez vos propres défis.\n\nMes 3 piliers du leadership personnel :\n\n1. Discipline quotidienne\n2. Apprentissage continu\n3. Authenticité\n\nQuel défi personnel vous aide à grandir en tant que leader ?\n\n#Leadership #Développement #Motivation"
                },
                en: {
                    professional: "👥 Modern leadership isn't just about giving orders.\n\nIt's about inspiring, supporting, and creating an environment where everyone can excel.\n\nThe best leaders I've met share 3 qualities:\n\n• Active listening\n• Embraced vulnerability\n• Clear vision\n\nWhich leadership quality seems most important to you?\n\n#Leadership #Management #Team",
                    inspirational: "🌟 A true leader doesn't create followers, they create other leaders.\n\nI've learned that a leader's greatness is measured by their ability to elevate others.\n\nEvery interaction is an opportunity to:\n• Inspire confidence\n• Transmit values\n• Reveal potential\n\nDo you remember a leader who transformed your vision?\n\n#Leadership #Inspiration #Development",
                    motivational: "💪 Leadership starts with leading yourself.\n\nBefore inspiring others, master your own challenges.\n\nMy 3 pillars of personal leadership:\n\n1. Daily discipline\n2. Continuous learning\n3. Authenticity\n\nWhat personal challenge helps you grow as a leader?\n\n#Leadership #Development #Motivation",
                    educational: "📖 Leadership is a skill that can be learned and developed.\n\nKey areas to focus on:\n\n• Communication skills\n• Emotional intelligence\n• Decision-making\n• Team building\n• Vision setting\n\nWhich area would you like to develop most?\n\n#Leadership #Development #Skills",
                    thoughtful: "🎯 The best leaders I know share one trait: they ask better questions.\n\nInstead of having all the answers, they:\n\n• Ask 'What if...'\n• Challenge assumptions\n• Seek diverse perspectives\n• Listen more than they speak\n\nWhat's the best question a leader has asked you?\n\n#Leadership #Questions #Growth"
                }
            },
            career: {
                fr: {
                    professional: "🚀 Votre carrière est un marathon, pas un sprint.\n\nChaque étape compte :\n\n• Développement de compétences\n• Construction de réseau\n• Recherche de mentors\n• Prise de risques calculés\n\nQuelle étape vous semble la plus importante actuellement ?\n\n#Carrière #Développement #Stratégie",
                    inspirational: "✨ Votre carrière n'est pas une ligne droite - c'est une aventure.\n\nChaque détour, chaque 'échec' vous enseigne quelque chose d'unique.\n\nEmbrassez l'incertitude. Les meilleures opportunités viennent souvent des chemins inattendus.\n\nQuel détour de carrière vous a le plus appris ?\n\n#Carrière #Inspiration #Croissance",
                    motivational: "💪 Investissez en vous - c'est le meilleur placement que vous puissiez faire.\n\n3 investissements qui transforment une carrière :\n\n1. Formation continue\n2. Réseau professionnel\n3. Expériences diverses\n\nDans quoi investissez-vous cette année ?\n\n#Carrière #Investissement #Croissance"
                },
                en: {
                    professional: "🚀 Your career is a marathon, not a sprint.\n\nEvery step counts:\n\n• Skill development\n• Network building\n• Finding mentors\n• Taking calculated risks\n\nWhich step seems most important to you right now?\n\n#Career #Development #Strategy",
                    inspirational: "✨ Your career isn't a straight line - it's an adventure.\n\nEvery detour, every 'failure' teaches you something unique.\n\nEmbrace uncertainty. The best opportunities often come from unexpected paths.\n\nWhat career detour taught you the most?\n\n#Career #Inspiration #Growth",
                    motivational: "💪 Invest in yourself - it's the best investment you can make.\n\n3 investments that transform a career:\n\n1. Continuous learning\n2. Professional network\n3. Diverse experiences\n\nWhat are you investing in this year?\n\n#Career #Investment #Growth"
                }
            }
        };

        // Configuration de l'application
        const config = {
            supabaseUrl: 'https://xrypwaibendenjgqgazv.supabase.co',
            supabaseKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhyeXB3YWliZW5kZW5qZ3FnYXp2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1NjQyNjgsImV4cCI6MjA3MjE0MDI2OH0.WM3Bikffw8bVNzGWZDDBQwuQag8JtI45ufYyFE3stQQ',
            ollamaBaseUrl: 'http://82.29.172.185:11434'
        };
        
        // Initialisation différée de Supabase
        let supabase;
        
        // Fonction pour initialiser Supabase une fois la bibliothèque chargée
        function initSupabase() {
            console.log('🔧 initSupabase appelée');
            console.log('🔍 window.supabase disponible:', typeof window.supabase);
            console.log('🔗 URL:', config.supabaseUrl);
            console.log('🔑 Clé disponible:', config.supabaseKey ? 'Oui' : 'Non');
            
            if (typeof window.supabase !== 'undefined') {
                try {
                    supabase = window.supabase.createClient(config.supabaseUrl, config.supabaseKey);
                    console.log('✅ Client Supabase créé:', supabase);
                    console.log('🔗 URL du client:', supabase.supabaseUrl);
                    return true;
                } catch (error) {
                    console.error('❌ Erreur création client Supabase:', error);
                    return false;
                }
            } else {
                console.log('⏳ Bibliothèque Supabase pas encore chargée');
                return false;
            }
        }
        
        // Structure SQL pour la table posts (à créer dans Supabase)
        /*
        CREATE TABLE IF NOT EXISTS posts (
            id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
            user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
            content TEXT NOT NULL,
            subject TEXT,
            audience TEXT,
            tone TEXT,
            language TEXT DEFAULT 'fr',
            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
            updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
        );
        
        -- Enable RLS
        ALTER TABLE posts ENABLE ROW LEVEL SECURITY;
        
        -- Policy: Users can only access their own posts
        CREATE POLICY "Users can view own posts" ON posts FOR SELECT USING (auth.uid() = user_id);
        CREATE POLICY "Users can insert own posts" ON posts FOR INSERT WITH CHECK (auth.uid() = user_id);
        CREATE POLICY "Users can update own posts" ON posts FOR UPDATE USING (auth.uid() = user_id);
        CREATE POLICY "Users can delete own posts" ON posts FOR DELETE USING (auth.uid() = user_id);
        */

        // Fonction globale pour la navigation
        window.navigateToSignup = function() {
            console.log('🧭 navigateToSignup appelée');
            
            // Essayer d'abord la méthode de l'application
            if (window.app && typeof window.app.showSignupPage === 'function') {
                console.log('✅ App disponible, appel de showSignupPage');
                try {
                    window.app.showSignupPage();
                    console.log('✅ showSignupPage appelée avec succès');
                    return;
                } catch (error) {
                    console.error('❌ Erreur lors de l\'appel de showSignupPage:', error);
                    console.log('🔄 Fallback vers navigation manuelle...');
                }
            }
            
            // Navigation manuelle de fallback
            console.log('🔄 Navigation manuelle vers signup...');
            
            // Masquer la page de connexion
            const loginPage = document.getElementById('loginPage');
            if (loginPage) {
                loginPage.style.display = 'none';
                loginPage.classList.remove('active');
                console.log('✅ Page de connexion masquée');
            } else {
                console.error('❌ Page de connexion non trouvée');
            }
            
            // Afficher la page d'inscription
            const signupPage = document.getElementById('signupPage');
            if (signupPage) {
                signupPage.style.display = 'block';
                signupPage.classList.add('active');
                console.log('✅ Page d\'inscription affichée');
                
                // Pré-remplir le formulaire si possible
                const loginEmail = document.getElementById('loginEmail')?.value;
                const loginPassword = document.getElementById('loginPassword')?.value;
                
                if (loginEmail && loginPassword) {
                    const signupEmail = document.getElementById('signupEmail');
                    const signupPassword = document.getElementById('signupPassword');
                    
                    if (signupEmail && signupPassword) {
                        signupEmail.value = loginEmail;
                        signupPassword.value = loginPassword;
                        console.log('✅ Formulaire pré-rempli');
                    }
                }
                
            } else {
                console.error('❌ Page d\'inscription non trouvée');
            }
            
            console.log('✅ Navigation vers signup terminée');
        }
        
        
        
        // Application avec authentification
        class LinkedInPostApp {
            constructor() {
                this.currentLanguage = 'fr';
                this.currentTheme = 'light';
                this.elements = {};
                this.user = null;
                this.currentPage = 'login';
                this.isNavigating = false;
                this.init();
            }
            
            async init() {
                this.cacheElements();
                // Initialiser l'état des pages
                this.initializePageState();
                
                // Attendre que Supabase soit chargé
                await this.waitForSupabase();
                
                this.setupEventListeners();
                this.setupAuthListeners();
                await this.checkAuthState();
                this.updateLanguage();
                this.updateProfileStatus();
            }
            
            async waitForSupabase() {
                let attempts = 0;
                const maxAttempts = 50;
                
                while (attempts < maxAttempts) {
                    if (initSupabase()) {
                        console.log('✅ Supabase initialisé avec succès');
                        
                        // Test de connectivité
                        try {
                            console.log('🔍 Test de connectivité Supabase...');
                            const { data, error } = await supabase.auth.getUser();
                            if (error) {
                                console.log('ℹ️ Pas d\'utilisateur connecté (normal)');
                            } else {
                                console.log('👤 Utilisateur déjà connecté:', data.user?.email);
                            }
                            console.log('✅ Connectivité Supabase OK');
                            
                            // Test de connexion avec les identifiants fournis
                            console.log('🧪 Test de connexion avec identifiants fournis...');
                            try {
                                const testResult = await supabase.auth.signInWithPassword({
                                    email: 'cdagorn3@gmail.com',
                                    password: 'Jesuisunelegende08&'
                                });
                                console.log('🧪 Résultat test connexion:', testResult);
                                
                                if (testResult.error) {
                                    console.log('❌ Test connexion échoué:', testResult.error.message);
                                    if (testResult.error.message.includes('Invalid login credentials')) {
                                        console.log('💡 L\'utilisateur n\'existe pas encore. Création nécessaire.');
                                    }
                                } else {
                                    console.log('✅ Test connexion réussi!');
                                    // Se déconnecter après le test
                                    await supabase.auth.signOut();
                                    console.log('🔓 Déconnexion après test');
                                }
                            } catch (testError) {
                                console.error('💥 Erreur lors du test de connexion:', testError);
                            }
                            
                        } catch (error) {
                            console.error('❌ Erreur de connectivité Supabase:', error);
                        }
                        
                        return;
                    }
                    await new Promise(resolve => setTimeout(resolve, 100));
                    attempts++;
                }
                
                console.error('❌ Impossible de charger Supabase après', maxAttempts, 'tentatives');
                this.showError('Erreur de connexion. Veuillez rafraîchir la page.');
            }
            
            showError(message) {
                this.showNotification(message, 'error');
            }
            
            showSuccess(message) {
                this.showNotification(message, 'success');
            }
            
            showWarning(message) {
                this.showNotification(message, 'warning');
            }
            
            showInfo(message) {
                this.showNotification(message, 'info');
            }
            
            /**
             * Méthode unifiée pour afficher les notifications
             * @param {string} message - Message à afficher
             * @param {string} type - Type de notification (error, success, warning, info)
             */
            showNotification(message, type = 'info') {
                const colors = {
                    error: { bg: 'var(--error-color)', icon: '❌' },
                    success: { bg: 'var(--success-color)', icon: '✅' },
                    warning: { bg: 'var(--warning-color)', icon: '⚠️' },
                    info: { bg: 'var(--info-color)', icon: 'ℹ️' }
                };
                
                const config = colors[type] || colors.info;
                
                // Déterminer la position selon le type
                const isBottomNotification = type === 'error' || type === 'warning';
                const position = isBottomNotification ? 
                    { bottom: '20px', right: '20px', top: 'auto' } : 
                    { top: '20px', right: '20px', bottom: 'auto' };
                
                // Animation selon la position
                const animationIn = isBottomNotification ? 'slideInBottomRight' : 'slideInRight';
                const animationOut = isBottomNotification ? 'slideOutBottomRight' : 'slideOutRight';
                
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.style.cssText = `
                    position: fixed;
                    ${position.top !== 'auto' ? `top: ${position.top};` : ''}
                    ${position.bottom !== 'auto' ? `bottom: ${position.bottom};` : ''}
                    right: ${position.right};
                    background: ${config.bg};
                    color: white;
                    padding: var(--space-4) var(--space-6);
                    border-radius: var(--radius-lg);
                    box-shadow: var(--shadow-lg);
                    z-index: 10000;
                    max-width: 400px;
                    display: flex;
                    align-items: center;
                    gap: var(--space-3);
                    font-weight: 500;
                    animation: ${animationIn} 0.3s ease-out;
                    cursor: pointer;
                    transform: translateX(420px);
                `;
                
                notification.innerHTML = `
                    <span style="font-size: 1.2rem;">${config.icon}</span>
                    <span>${message}</span>
                `;
                
                document.body.appendChild(notification);
                
                // Animation d'entrée
                setTimeout(() => {
                    notification.style.transform = 'translateX(0)';
                    notification.style.transition = 'transform 0.3s ease-out';
                }, 50);
                
                // Auto-suppression après 5 secondes
                const removeNotification = () => {
                    if (notification.parentNode) {
                        notification.style.animation = animationOut + ' 0.3s ease-out';
                        notification.style.transform = 'translateX(420px)';
                        setTimeout(() => {
                            if (notification.parentNode) {
                                notification.parentNode.removeChild(notification);
                            }
                        }, 300);
                    }
                };
                
                setTimeout(removeNotification, 5000);
                
                // Suppression au clic
                notification.addEventListener('click', removeNotification);
                
                console.log(`📢 Notification ${type} affichée ${isBottomNotification ? 'en bas' : 'en haut'}: ${message}`);
            }
            
            /**
             * Méthode utilitaire pour exécuter des opérations avec gestion d'erreur centralisée
             * @param {Function} operation - L'opération à exécuter
             * @param {string} errorMessage - Message d'erreur personnalisé
             * @param {Function} fallback - Fonction de fallback en cas d'erreur
             * @returns {Promise<any>} - Résultat de l'opération
             */
            async safeExecute(operation, errorMessage, fallback = null) {
                try {
                    return await operation();
                } catch (error) {
                    console.error(errorMessage, error);
                    this.showError(errorMessage);
                    
                    if (fallback && typeof fallback === 'function') {
                        return fallback();
                    }
                    
                    throw error;
                }
            }
            
            /**
             * Méthode utilitaire pour accéder aux éléments du cache DOM
             * @param {string} key - Clé de l'élément dans le cache
             * @returns {HTMLElement|null} - L'élément DOM ou null
             */
            getElement(key) {
                return this.elements[key] || null;
            }
            
            /**
             * Méthode utilitaire pour accéder aux éléments du cache DOM avec vérification
             * @param {string} key - Clé de l'élément dans le cache
             * @param {string} errorMessage - Message d'erreur si l'élément n'existe pas
             * @returns {HTMLElement} - L'élément DOM
             * @throws {Error} - Si l'élément n'existe pas
             */
            getRequiredElement(key, errorMessage = `Élément requis non trouvé: ${key}`) {
                const element = this.elements[key];
                if (!element) {
                    throw new Error(errorMessage);
                }
                return element;
            }

            setButtonLoadingState(btn, isLoading, loadingText = 'Chargement...') {
                if (!btn) return;

                if (isLoading) {
                    btn.disabled = true;
                    const span = btn.querySelector('span');
                    if (span) {
                        this.originalButtonText = span.textContent;
                        span.textContent = loadingText;
                    }
                } else {
                    btn.disabled = false;
                    const span = btn.querySelector('span');
                    if (span && this.originalButtonText) {
                        span.textContent = this.originalButtonText;
                    }
                }
            }
            
            cacheElements() {
                console.log('🔍 Mise en cache des éléments DOM...');
                this.elements = {
                    // Éléments principaux
                    themeToggle: document.getElementById('themeToggle'),
                    languageSelector: document.getElementById('languageSelector'),
                    postForm: document.getElementById('postForm'),
                    generateBtn: document.getElementById('generateBtn'),
                    postResult: document.getElementById('postResult'),
                    postContent: document.getElementById('postContent'),
                    publishLinkedInBtn: document.getElementById('publishLinkedInBtn'),
                    
                    // Onglets
                    createTabBtn: document.getElementById('createTabBtn'),
                    savedTabBtn: document.getElementById('savedTabBtn'),
                    createTab: document.getElementById('createTab'),
                    savedTab: document.getElementById('savedTab'),
                    
                    // Posts
                    postCount: document.getElementById('postCount'),
                    savedPostsContainer: document.getElementById('savedPostsContainer'),
                    emptyState: document.getElementById('emptyState'),
                    
                    // Authentification
                    dashboard: document.getElementById('dashboard'),
                    authContainer: document.getElementById('authContainer'),
                    loginPage: document.getElementById('loginPage'),
                    signupPage: document.getElementById('signupPage'),
                    loginForm: document.getElementById('loginForm'),
                    signupForm: document.getElementById('signupForm'),
                    logoutBtn: document.getElementById('logoutBtn'),
                    
                    // Formulaires d'auth
                    loginEmail: document.getElementById('loginEmail'),
                    loginPassword: document.getElementById('loginPassword'),
                    loginError: document.getElementById('loginError'),
                    loginSuggestion: document.getElementById('loginSuggestion'),
                    loginBtn: document.getElementById('loginBtn'),
                    signupName: document.getElementById('signupName'),
                    signupEmail: document.getElementById('signupEmail'),
                    signupPassword: document.getElementById('signupPassword'),
                    signupError: document.getElementById('signupError'),
                    signupSuggestion: document.getElementById('signupSuggestion'),
                    signupSuccess: document.getElementById('signupSuccess'),
                    signupBtn: document.getElementById('signupBtn'),
                    
                    // Liens d'auth
                    showSignupLink: document.getElementById('showSignupLink'),
                    showLoginLink: document.getElementById('showLoginLink'),
                    
                    // Ollama
                    ollamaModel: document.getElementById('ollamaModel'),
                    modelInfo: document.getElementById('modelInfo'),
                    modelDescription: document.getElementById('modelDescription'),
                    modelSize: document.getElementById('modelSize'),
                    ollamaStatusDisplay: document.getElementById('ollamaStatusDisplay'),
                    
                    // Formulaires de post
                    subject: document.getElementById('subject'),
                    audience: document.getElementById('audience'),
                    tone: document.getElementById('tone'),
                    postLanguage: document.getElementById('postLanguage'),
                    
                    // Actions
                    exportBtn: document.getElementById('exportBtn'),
                    importBtn: document.getElementById('importBtn'),
                    importFile: document.getElementById('importFile'),
                    searchPosts: document.getElementById('searchPosts'),
                    
                    // Nouveaux éléments
                    profileBtn: document.getElementById('profileBtn'),
                    profileStatus: document.getElementById('profileStatus')
                };
                
                // Vérifier si le bouton LinkedIn a été trouvé
                console.log('🔍 Bouton LinkedIn trouvé:', !!this.elements.publishLinkedInBtn);
                if (this.elements.publishLinkedInBtn) {
                    console.log('✅ Bouton LinkedIn ID:', this.elements.publishLinkedInBtn.id);
                    
                    // Attachement immédiat de l'event listener si pas encore fait
                    if (!this.elements.publishLinkedInBtn._listenerAttached) {
                        console.log('🔗 Attachement précoce de l\'event listener...');
                        this.elements.publishLinkedInBtn.addEventListener('click', (e) => {
                            console.log('🎯 CLICK DÉTECTÉ sur le bouton Publier (attachement précoce) !');
                            e.preventDefault();
                            e.stopPropagation();
                            this.publishToLinkedIn();
                        }, { passive: false });
                        this.elements.publishLinkedInBtn._listenerAttached = true;
                        console.log('✅ Event listener attaché précocement');
                    }
                } else {
                    console.log('❌ Bouton LinkedIn non trouvé - vérifier l\'ID');
                }
            }
            
            // Méthodes d'authentification
            async checkAuthState() {
                console.log('🔍 checkAuthState appelé');
                
                if (!supabase) {
                    console.log('❌ Supabase non disponible, affichage page de connexion');
                    this.showLoginPage();
                    return;
                }
                
                await this.safeExecute(
                    async () => {
                        console.log('🔍 Vérification de l\'utilisateur...');
                        const { data: { user }, error } = await supabase.auth.getUser();
                        
                        if (error) {
                            console.error('❌ Erreur lors de la récupération de l\'utilisateur:', error);
                            this.user = null;
                            this.showLoginPage();
                            return;
                        }
                        
                        this.user = user;
                        console.log('👤 Utilisateur récupéré:', user ? user.email : 'Aucun');
                        
                        if (user) {
                            console.log('✅ Utilisateur connecté, affichage du dashboard');
                            this.showDashboard();
                        } else {
                            console.log('ℹ️ Aucun utilisateur connecté, affichage page de connexion');
                            this.showLoginPage();
                        }
                    },
                    'Erreur lors de la vérification de l\'authentification',
                    () => {
                        console.log('🔄 Fallback vers page de connexion');
                        this.showLoginPage();
                    }
                );
            }
            
            // Méthode pour initialiser l'état des pages
            initializePageState() {
                // Masquer le dashboard par défaut
                const dashboard = this.getElement('dashboard');
                if (dashboard) {
                    dashboard.classList.remove('active');
                    dashboard.style.display = 'none';
                }
                
                // Masquer toutes les pages d'authentification sauf la connexion
                this.getElement('loginPage')?.classList.add('active');
                this.getElement('signupPage')?.classList.remove('active');
                
                // Afficher le container d'authentification
                const authContainer = this.getElement('authContainer');
                if (authContainer) {
                    authContainer.style.display = 'flex';
                }
            }
            
            /**
             * Méthode unifiée pour afficher les pages d'authentification
             * @param {string} pageType - Type de page ('login' ou 'signup')
             */
            showAuthPage(pageType) {
                if (this.isNavigating) return;

                this.currentPage = pageType;
                const targetPageId = `${pageType}Page`;
                const allPages = document.querySelectorAll('.auth-page');
                let activePage = null;

                allPages.forEach(page => {
                    if (page.classList.contains('active')) {
                        activePage = page;
                    }
                });

                const targetPage = this.getElement(targetPageId);

                if (activePage && activePage.id !== targetPageId) {
                    this.isNavigating = true;
                    activePage.classList.add('fade-out');
                    
                    setTimeout(() => {
                        activePage.classList.remove('active', 'fade-out');
                if (targetPage) {
                            targetPage.classList.add('active');
                        }
                        this.isNavigating = false;
                    }, 300);
                } else if (targetPage) {
                    targetPage.classList.add('active');
                }
                
                const authContainer = this.getElement('authContainer');
                if (authContainer) {
                    authContainer.style.display = 'flex';
                }
            }
            
            /**
             * Afficher la page de connexion
             */
            showLoginPage() {
                this.currentPage = 'login';
                console.log('🔐 showLoginPage appelé');
                
                // Masquer le dashboard
                const dashboard = this.getElement('dashboard');
                if (dashboard) {
                    dashboard.style.display = 'none';
                    dashboard.classList.remove('active');
                }
                
                // Afficher le container d'authentification
                const authContainer = this.getElement('authContainer');
                if (authContainer) {
                    authContainer.style.display = 'flex';
                }
                
                // Masquer toutes les pages d'authentification
                document.querySelectorAll('.auth-page').forEach(page => {
                    page.style.display = 'none';
                    page.classList.remove('active', 'fade-out');
                });
                
                // Afficher la page de connexion
                const loginPage = this.getElement('loginPage');
                if (loginPage) {
                    loginPage.style.display = 'block';
                    loginPage.classList.add('active');
                    console.log('✅ Page de connexion affichée');
                }
                
                // Masquer les messages d'erreur et suggestions
                const loginSuggestion = this.getElement('loginSuggestion');
                const loginError = this.getElement('loginError');

                if (loginSuggestion) {
                    loginSuggestion.style.display = 'none';
                }
                if (loginError) {
                    loginError.style.display = 'none';
                }
                
                console.log('✅ Page de connexion initialisée');
            }
            
            /**
             * Afficher la page d'inscription
             */
            showSignupPage() {
                this.currentPage = 'signup';
                console.log('📝 showSignupPage appelée');
                
                // Masquer le dashboard
                const dashboard = this.getElement('dashboard');
                if (dashboard) {
                    dashboard.style.display = 'none';
                    dashboard.classList.remove('active');
                }
                
                // Afficher le container d'authentification
                const authContainer = this.getElement('authContainer');
                if (authContainer) {
                    authContainer.style.display = 'flex';
                }
                
                // Masquer toutes les pages d'authentification
                document.querySelectorAll('.auth-page').forEach(page => {
                    page.style.display = 'none';
                    page.classList.remove('active', 'fade-out');
                });
                
                // Afficher la page d'inscription
                const signupPage = this.getElement('signupPage');
                if (signupPage) {
                    signupPage.style.display = 'block';
                    signupPage.classList.add('active');
                    console.log('✅ Page d\'inscription affichée');
                }
                
                // Pré-remplir le formulaire avec les identifiants de connexion si ils existent
                const loginEmail = this.getElement('loginEmail')?.value;
                const loginPassword = this.getElement('loginPassword')?.value;
                const signupError = this.getElement('signupError');

                if (signupError) {
                    signupError.style.display = 'none';
                }
                
                if (loginEmail && loginPassword) {
                    const signupEmail = this.getElement('signupEmail');
                    const signupPassword = this.getElement('signupPassword');
                    
                    if (signupEmail && signupPassword) {
                        signupEmail.value = loginEmail;
                        signupPassword.value = loginPassword;
                        
                        // Afficher un message informatif
                        const signupSuggestion = this.getElement('signupSuggestion');
                        if (signupSuggestion) {
                            signupSuggestion.innerHTML = `
                                <div style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); color: #3b82f6; padding: var(--space-4); border-radius: var(--radius-lg); margin-bottom: var(--space-6); font-size: 0.95rem; text-align: center;">
                                    <strong>💡 Information :</strong> Le formulaire a été pré-rempli avec vos identifiants de connexion. 
                                    Complétez avec votre nom complet et cliquez sur "Créer mon compte".
                                </div>
                            `;
                            signupSuggestion.style.display = 'block';
                        }
                    }
                }
                
                console.log('✅ Page d\'inscription initialisée');
            }
            
            async showDashboard() {
                this.currentPage = 'dashboard';
                console.log('🏠 showDashboard appelé');
                
                // Masquer le container d'authentification
                const authContainer = this.getElement('authContainer');
                if (authContainer) {
                    authContainer.style.display = 'none';
                    console.log('✅ Container d\'authentification masqué');
                }
                
                // Masquer toutes les pages d'authentification
                document.querySelectorAll('.auth-page').forEach(page => {
                    page.classList.remove('active', 'fade-out');
                    page.style.display = 'none';
                    console.log(`✅ Page ${page.id} masquée`);
                });
                
                // Afficher le dashboard
                const dashboard = this.getElement('dashboard');
                if (dashboard) {
                    dashboard.style.display = 'block';
                    dashboard.classList.add('active');
                    console.log('✅ Dashboard affiché');
                } else {
                    console.error('❌ Dashboard non trouvé');
                }
                
                // Mettre à jour le statut du profil
                this.updateProfileStatus();
                
                this.initializeApp();
                
                // Synchroniser les posts locaux et mettre à jour le compteur
                await this.syncLocalPosts();
                await this.updatePostCount();
                
                console.log('✅ Dashboard initialisé avec succès');
            }
            
            setupAuthListeners() {
                // Formulaire de connexion
                this.getElement('loginForm')?.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    await this.handleLogin();
                });
                
                // Formulaire d'inscription
                this.getElement('signupForm')?.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    await this.handleSignup();
                });
                
                // Liens de navigation
                this.getElement('showSignupLink')?.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showSignupPage();
                });
                
                this.getElement('showLoginLink')?.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showLoginPage();
                });
                
                // Bouton de déconnexion
                this.getElement('logoutBtn')?.addEventListener('click', () => this.handleLogout());
                
                // Écouter les changements d'auth
                if (supabase) {
                    supabase.auth.onAuthStateChange((event, session) => {
                        if (event === 'SIGNED_IN') {
                            this.user = session.user;
                            this.showDashboard();
                        } else if (event === 'SIGNED_OUT') {
                            this.user = null;
                            this.showLoginPage();
                        }
                    });
                }
            }
            
            async handleLogin() {
                console.log('🔐 handleLogin appelé');
                console.log('🔍 Supabase disponible:', !!supabase);
                
                if (!supabase) {
                    console.error('❌ Supabase non initialisé');
                    this.showError('Service non disponible. Veuillez rafraîchir la page.');
                    return;
                }
                
                const email = this.getElement('loginEmail')?.value;
                const password = this.getElement('loginPassword')?.value;
                const errorDiv = this.getElement('loginError');
                const btn = this.getElement('loginBtn');
                
                console.log('📧 Email saisi:', email);
                console.log('🔑 Mot de passe saisi:', password ? '***' : 'vide');
                
                if (!email || !password) {
                    console.error('❌ Email ou mot de passe manquant');
                    this.showError('Veuillez remplir tous les champs.');
                    return;
                }
                
                // État de chargement
                btn.disabled = true;
                btn.querySelector('span').textContent = 'Connexion...';
                errorDiv.style.display = 'none';
                
                // Masquer la suggestion précédente
                const suggestionDiv = this.getElement('loginSuggestion');
                if (suggestionDiv) {
                    suggestionDiv.style.display = 'none';
                }
                
                try {
                    console.log('🚀 Tentative de connexion avec Supabase...');
                    console.log('🔗 URL Supabase:', supabase.supabaseUrl);
                    
                    // Test de connexion avec timeout
                    const loginPromise = supabase.auth.signInWithPassword({
                        email: email,
                        password: password,
                    });
                    
                    const timeoutPromise = new Promise((_, reject) => 
                        setTimeout(() => reject(new Error('Timeout de connexion (30s)')), 30000)
                    );
                    
                    const { data, error } = await Promise.race([loginPromise, timeoutPromise]);
                    
                    console.log('📊 Réponse Supabase:', { data, error });
                    
                    if (error) {
                        console.error('❌ Erreur de connexion:', error);
                        throw error;
                    }
                    
                    console.log('✅ Connexion réussie:', data);
                    this.showSuccess('Connexion réussie ! Redirection...');
                    
                    // Test de récupération de l'utilisateur
                    try {
                        const { data: userData, error: userError } = await supabase.auth.getUser();
                        if (userError) {
                            console.error('❌ Erreur récupération utilisateur:', userError);
                        } else {
                            console.log('👤 Utilisateur récupéré:', userData.user);
                        }
                    } catch (error) {
                        console.error('❌ Erreur lors de la récupération utilisateur:', error);
                    }
                    
                    // La redirection sera gérée par onAuthStateChange
                } catch (error) {
                    console.error('💥 Erreur dans handleLogin:', error);
                    const errorMessage = this.getErrorMessage(error.message);
                    console.log('📝 Message d\'erreur formaté:', errorMessage);
                    
                    // Afficher l'erreur
                    errorDiv.textContent = errorMessage;
                    errorDiv.style.display = 'block';
                    
                    // Si c'est un problème de credentials, suggérer la création de compte
                    if (error.message && error.message.includes('Invalid login credentials')) {
                        const suggestionDiv = this.getElement('loginSuggestion');
                        if (suggestionDiv) {
                            suggestionDiv.innerHTML = `
                                <div style="margin-top: 10px; padding: 10px; background: var(--info-color); color: white; border-radius: var(--radius-md);">
                                    <strong>💡 Suggestion :</strong> Cet email n'est pas encore enregistré. 
                                    <button onclick="window.navigateToSignup()" style="background: white; color: var(--info-color); border: none; padding: 5px 10px; border-radius: var(--radius-sm); margin-left: 10px; cursor: pointer;">
                                        Créer un compte
                                    </button>
                                </div>
                            `;
                            suggestionDiv.style.display = 'block';
                        }
                    }
                } finally {
                    btn.disabled = false;
                    btn.querySelector('span').textContent = translations[this.currentLanguage].loginBtnText;
                }
            }
            
            async handleSignup() {
                console.log('📝 handleSignup appelé');
                console.log('🔍 Supabase disponible:', !!supabase);
                
                if (!supabase) {
                    this.showError('Service non disponible. Veuillez rafraîchir la page.');
                    return;
                }
                
                const name = this.getElement('signupName')?.value;
                const email = this.getElement('signupEmail')?.value;
                const password = this.getElement('signupPassword')?.value;
                const errorDiv = this.getElement('signupError');
                const suggestionDiv = this.getElement('signupSuggestion');
                const successDiv = this.getElement('signupSuccess');
                const btn = this.getElement('signupBtn');
                
                console.log('📝 Données d\'inscription:', { name, email, password: password ? '***' : 'vide' });
                
                if (!name || !email || !password) {
                    console.error('❌ Champs manquants pour l\'inscription');
                    this.showError('Veuillez remplir tous les champs.');
                    return;
                }
                
                // État de chargement
                btn.disabled = true;
                btn.querySelector('span').textContent = 'Création...';
                errorDiv.style.display = 'none';
                suggestionDiv.style.display = 'none';
                successDiv.style.display = 'none';
                
                try {
                    console.log('🚀 Tentative de création de compte...');
                    
                    const { data, error } = await supabase.auth.signUp({
                        email: email,
                        password: password,
                        options: {
                            data: {
                                full_name: name,
                            }
                        }
                    });
                    
                    console.log('📊 Réponse inscription Supabase:', { data, error });
                    
                    if (error) {
                        console.error('❌ Erreur d\'inscription:', error);
                        throw error;
                    }
                    
                    if (data.user && !data.user.email_confirmed_at) {
                        const message = this.currentLanguage === 'fr' ? 
                            'Compte créé ! Vérifiez votre email pour confirmer votre inscription.' :
                            'Account created! Check your email to confirm your registration.';
                        
                        console.log('✅ Compte créé avec succès:', data.user);
                        successDiv.textContent = message;
                        successDiv.style.display = 'block';
                        
                        // Réinitialiser le formulaire
                        document.getElementById('signupForm').reset();
                    }
                    
                } catch (error) {
                    console.error('💥 Erreur dans handleSignup:', error);
                    const errorMessage = this.getErrorMessage(error.message);
                    errorDiv.textContent = errorMessage;
                    errorDiv.style.display = 'block';
                } finally {
                    btn.disabled = false;
                    btn.querySelector('span').textContent = translations[this.currentLanguage].signupBtnText;
                }
            }
            
            async handleLogout() {
                console.log('🚪 handleLogout appelé');
                
                if (!supabase) {
                    this.showError('Service non disponible.');
                    return;
                }
                
                try {
                    await supabase.auth.signOut();
                    console.log('✅ Déconnexion réussie');
                    
                    // Réinitialiser l'utilisateur
                    this.user = null;
                    
                    // Afficher la page de connexion
                    this.showLoginPage();
                    
                    // Nettoyer le localStorage si nécessaire
                    // localStorage.removeItem('linkedinProfile'); // Optionnel : garder le profil LinkedIn
                    
                } catch (error) {
                    console.error('❌ Erreur déconnexion:', error);
                    this.showError('Erreur lors de la déconnexion.');
                }
            }
            
            getErrorMessage(error) {
                console.log('🔍 getErrorMessage appelé avec:', error);
                
                const errorMessages = {
                    fr: {
                        'Invalid login credentials': 'Email ou mot de passe incorrect',
                        'Email not confirmed': 'Email non confirmé. Vérifiez votre boîte mail.',
                        'User already registered': 'Un compte existe déjà avec cet email',
                        'Password should be at least 6 characters': 'Le mot de passe doit contenir au moins 6 caractères',
                        'Invalid email': 'Adresse email invalide'
                    },
                    en: {
                        'Invalid login credentials': 'Invalid email or password',
                        'Email not confirmed': 'Email not confirmed. Check your inbox.',
                        'User already registered': 'An account with this email already exists',
                        'Password should be at least 6 characters': 'Password must be at least 6 characters',
                        'Invalid email': 'Invalid email address'
                    }
                };
                
                return errorMessages[this.currentLanguage][error] || error;
            }

            initializeApp() {
                // Animation d'entrée optimisée
                const fadeElements = document.querySelectorAll('.fade-in');
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });
                
                fadeElements.forEach((el, index) => {
                    el.style.opacity = '0';
                    el.style.transform = 'translateY(30px)';
                    el.style.transition = `all 0.6s ease-out ${index * 0.1}s`;
                    observer.observe(el);
                });
                
                // Initialiser Ollama
                this.initializeOllama();
            }
            
            // Initialisation d'Ollama
            async initializeOllama() {
                try {
                    // Charger les modèles disponibles
                    await this.loadOllamaModels();
                    
                    // Vérifier le statut du serveur
                    await this.checkOllamaStatus();
                    
                } catch (error) {
                    console.error('Erreur initialisation Ollama:', error);
                    this.updateOllamaStatus('disconnected');
                }
            }
            
            // Charger les modèles Ollama disponibles
            async loadOllamaModels() {
                try {
                    const response = await fetch('http://82.29.172.185:11434/api/tags', {
                        method: 'GET',
                        headers: { 'Content-Type': 'application/json' }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        this.populateModelSelector(data.models || []);
                        this.updateOllamaStatus('connected');
                    } else {
                        throw new Error(`Erreur HTTP: ${response.status}`);
                    }
                    
                } catch (error) {
                    console.error('Erreur chargement modèles:', error);
                    this.updateOllamaStatus('disconnected');
                    this.populateModelSelector([]);
                }
            }
            
            // Remplir le sélecteur de modèles
            populateModelSelector(models) {
                const modelSelect = document.getElementById('ollamaModel');
                const modelInfo = document.getElementById('modelInfo');
                
                if (!modelSelect) return;
                
                // Vider le sélecteur
                modelSelect.innerHTML = '';
                
                if (models.length === 0) {
                    // Aucun modèle disponible
                    const option = document.createElement('option');
                    option.value = '';
                    option.textContent = this.currentLanguage === 'fr' ? 
                        'Aucun modèle disponible' : 'No models available';
                    modelSelect.appendChild(option);
                    modelSelect.disabled = true;
                    return;
                }
                
                // Option par défaut
                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = this.currentLanguage === 'fr' ? 
                    'Choisir un modèle...' : 'Choose a model...';
                modelSelect.appendChild(defaultOption);
                
                // Ajouter chaque modèle
                models.forEach(model => {
                    const option = document.createElement('option');
                    option.value = model.name;
                    option.textContent = `${model.name} (${this.formatModelSize(model.size)})`;
                    option.dataset.modelInfo = JSON.stringify(model);
                    modelSelect.appendChild(option);
                });
                
                // Activer le sélecteur
                modelSelect.disabled = false;
                
                // Écouter les changements pour afficher les infos du modèle
                modelSelect.addEventListener('change', (e) => this.onModelChange(e));
            }
            
            // Gérer le changement de modèle
            onModelChange(event) {
                const modelSelect = event.target;
                const modelInfo = document.getElementById('modelInfo');
                const modelDescription = document.getElementById('modelDescription');
                const modelSize = document.getElementById('modelSize');
                
                if (!modelSelect.value) {
                    modelInfo.style.display = 'none';
                    return;
                }
                
                try {
                    const selectedOption = modelSelect.options[modelSelect.selectedIndex];
                    const model = JSON.parse(selectedOption.dataset.modelInfo);
                    
                    // Afficher les informations du modèle
                    modelDescription.textContent = this.currentLanguage === 'fr' ? 
                        `Modèle: ${model.name}` : `Model: ${model.name}`;
                    modelSize.textContent = this.currentLanguage === 'fr' ? 
                        `Taille: ${this.formatModelSize(model.size)}` : `Size: ${this.formatModelSize(model.size)}`;
                    
                    modelInfo.style.display = 'block';
                    
                } catch (error) {
                    console.error('Erreur affichage infos modèle:', error);
                    modelInfo.style.display = 'none';
                }
            }
            
            // Formater la taille du modèle
            formatModelSize(bytes) {
                if (bytes === 0) return '0 B';
                
                const k = 1024;
                const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            // Vérifier le statut d'Ollama
            async checkOllamaStatus() {
                try {
                    const response = await fetch('http://82.29.172.185:11434/api/tags', {
                        method: 'GET',
                        headers: { 'Content-Type': 'application/json' },
                        signal: AbortSignal.timeout(5000) // Timeout de 5 secondes
                    });
                    
                    if (response.ok) {
                        this.updateOllamaStatus('connected');
                    } else {
                        this.updateOllamaStatus('disconnected');
                    }
                    
                } catch (error) {
                    console.error('Erreur vérification statut Ollama:', error);
                    this.updateOllamaStatus('disconnected');
                }
            }
            
            // Mettre à jour le statut d'Ollama
            updateOllamaStatus(status) {
                const statusDisplay = document.getElementById('ollamaStatusDisplay');
                if (!statusDisplay) return;
                
                const statusText = this.currentLanguage === 'fr' ? 
                    translations[this.currentLanguage][`status${status.charAt(0).toUpperCase() + status.slice(1)}`] :
                    translations[this.currentLanguage][`status${status.charAt(0).toUpperCase() + status.slice(1)}`];
                
                statusDisplay.innerHTML = `
                    <div class="status-indicator ${status}">
                        <svg class="icon" viewBox="0 0 24 24">
                            ${this.getStatusIcon(status)}
                        </svg>
                        <span>${statusText}</span>
                    </div>
                `;
            }
            
            // Obtenir l'icône de statut
            getStatusIcon(status) {
                switch (status) {
                    case 'connected':
                        return '<path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>';
                    case 'disconnected':
                        return '<path d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"/>';
                    case 'checking':
                    default:
                        return '<path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2zm0 18a8 8 0 0 1-8-8 8 8 0 0 1 8-8 8 8 0 0 1 8 8 8 8 0 0 1-8 8z"/><path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" fill="none"/>';
                }
            }

            setupEventListeners() {
                // Utilisation de la délégation d'événements
                this.elements.themeToggle?.addEventListener('click', () => this.toggleTheme());
                this.elements.languageSelector?.addEventListener('change', (e) => this.changeLanguage(e.target.value));
                this.elements.postForm?.addEventListener('submit', (e) => this.generatePost(e));
                // Event listener pour le bouton Publier avec debugging renforcé
                if (this.elements.publishLinkedInBtn) {
                    console.log('🔗 Attachement de l\'event listener au bouton Publier...');
                    this.elements.publishLinkedInBtn.addEventListener('click', (e) => {
                        console.log('🎯 CLICK DÉTECTÉ sur le bouton Publier !');
                        console.log('Event details:', e);
                        console.log('Button state:', {
                            disabled: this.elements.publishLinkedInBtn.disabled,
                            display: this.elements.publishLinkedInBtn.style.display,
                            pointerEvents: this.elements.publishLinkedInBtn.style.pointerEvents
                        });
                        
                        // Empêcher la propagation si nécessaire
                        e.preventDefault();
                        e.stopPropagation();
                        
                        this.publishToLinkedIn();
                    }, { passive: false });
                    console.log('✅ Event listener attaché au bouton Publier');
                } else {
                    console.log('❌ Bouton Publier non trouvé lors de l\'attachement de l\'event listener');
                }

                this.elements.createTabBtn?.addEventListener('click', () => this.switchTab('create'));
                this.elements.savedTabBtn?.addEventListener('click', () => this.switchTab('saved'));
                
                // Fonctionnalités supplémentaires
                document.getElementById('exportBtn')?.addEventListener('click', () => this.exportPosts());
                document.getElementById('importBtn')?.addEventListener('click', () => this.triggerImport());
                document.getElementById('importFile')?.addEventListener('change', (e) => this.importPosts(e));
                document.getElementById('searchPosts')?.addEventListener('input', (e) => this.searchPosts(e.target.value));
                

                
                // Liens d'ancrage optimisés
                document.addEventListener('click', (e) => {
                    const anchor = e.target.closest('a[href^="#"]');
                    if (anchor) {
                        e.preventDefault();
                        const target = document.querySelector(anchor.getAttribute('href'));
                        target?.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            }

            toggleTheme() {
                this.currentTheme = this.currentTheme === 'light' ? 'dark' : 'light';
                document.body.dataset.theme = this.currentTheme;
                
                const themeText = this.currentTheme === 'light' ? 
                    translations[this.currentLanguage].themeToggleLight : 
                    translations[this.currentLanguage].themeToggleDark;
                
                const themeIcon = this.currentTheme === 'light' ? 
                    '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>' : 
                    '<circle cx="12" cy="12" r="5"/><path d="m12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>';
                
                this.elements.themeToggle.innerHTML = `
                    <svg class="icon" viewBox="0 0 24 24">${themeIcon}</svg>
                    <span>${themeText}</span>
                `;
            }

            changeLanguage(language) {
                this.currentLanguage = language;
                this.updateLanguage();
            }
            
            updateLanguage() {
                const lang = translations[this.currentLanguage];
                
                // Utilisation de requestAnimationFrame pour les mises à jour DOM
                requestAnimationFrame(() => {
                    Object.keys(lang).forEach(key => {
                        const element = document.getElementById(key);
                        if (element) {
                            element.textContent = lang[key];
                        }
                    });
                    
                    if (this.elements.languageSelector) {
                        this.elements.languageSelector.value = this.currentLanguage;
                    }
                    
                    // Mettre à jour les placeholders
                    const loginEmail = document.getElementById('loginEmail');
                    if (loginEmail) loginEmail.placeholder = lang.emailPlaceholder;
                    const loginPassword = document.getElementById('loginPassword');
                    if (loginPassword) loginPassword.placeholder = lang.passwordPlaceholder;
                    const signupName = document.getElementById('signupName');
                    if (signupName) signupName.placeholder = lang.namePlaceholder;
                    const signupEmail = document.getElementById('signupEmail');
                    if (signupEmail) signupEmail.placeholder = lang.emailPlaceholder;
                    const signupPassword = document.getElementById('signupPassword');
                    if (signupPassword) signupPassword.placeholder = lang.passwordSignupPlaceholder;
                    
                    if (this.elements.themeToggle) {
                        const themeText = this.currentTheme === 'light' ? 
                            lang.themeToggleLight : lang.themeToggleDark;
                        
                        const themeIcon = this.currentTheme === 'light' ? 
                            '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>' : 
                            '<circle cx="12" cy="12" r="5"/><path d="m12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>';
                        
                        this.elements.themeToggle.innerHTML = `
                            <svg class="icon" viewBox="0 0 24 24">${themeIcon}</svg>
                            <span>${themeText}</span>
                        `;
                    }
                    

                    
                    const profileBtn = this.elements.profileBtn;
                    if (profileBtn) {
                        const profileText = profileBtn.querySelector('span');
                        if (profileText) {
                            profileText.textContent = lang.profileText;
                        }
                    }
                    
                    // Mettre à jour le texte du bouton de publication LinkedIn
                    if (this.elements.publishLinkedInBtn) {
                        const publishText = this.elements.publishLinkedInBtn.querySelector('#publishBtnText');
                        if (publishText) {
                            publishText.textContent = lang.publishBtnText;
                        }
                    }
                    
                    // Mettre à jour le statut du profil
                    this.updateProfileStatus();
                });
            }



            async generatePost(e) {
                e.preventDefault();
                
                console.log('🚀 generatePost appelé');
                
                // Récupérer les valeurs du formulaire
                const formData = new FormData(this.elements.postForm);
                const subject = formData.get('subject') || this.getElement('subject')?.value;
                const audience = formData.get('audience') || this.getElement('audience')?.value;
                const tone = formData.get('tone') || this.getElement('tone')?.value;
                const postLanguage = formData.get('postLanguage') || this.getElement('postLanguage')?.value;
                const selectedModel = formData.get('ollamaModel') || this.getElement('ollamaModel')?.value;
                
                console.log('📝 Données du formulaire:', { subject, audience, tone, postLanguage, selectedModel });
                
                // Validation complète des champs
                const validationErrors = [];
                
                if (!subject || !subject.trim()) {
                    validationErrors.push(this.currentLanguage === 'fr' ? 'Sujet du post' : 'Post subject');
                }
                if (!audience || !audience.trim()) {
                    validationErrors.push(this.currentLanguage === 'fr' ? 'Audience cible' : 'Target audience');
                }
                if (!tone || !tone.trim()) {
                    validationErrors.push(this.currentLanguage === 'fr' ? 'Ton du message' : 'Message tone');
                }
                if (!postLanguage || !postLanguage.trim()) {
                    validationErrors.push(this.currentLanguage === 'fr' ? 'Langue du post' : 'Post language');
                }
                if (!selectedModel || !selectedModel.trim()) {
                    validationErrors.push(this.currentLanguage === 'fr' ? 'Modèle IA' : 'AI model');
                }
                
                if (validationErrors.length > 0) {
                    const errorMessage = this.currentLanguage === 'fr' ? 
                        `Veuillez remplir les champs suivants : ${validationErrors.join(', ')}` :
                        `Please fill in the following fields: ${validationErrors.join(', ')}`;
                    
                    this.showNotification(errorMessage, 'error');
                    console.error('❌ Validation échouée:', validationErrors);
                    return;
                }
                
                // Validation de la longueur du sujet
                if (subject.trim().length < 10) {
                    const errorMessage = this.currentLanguage === 'fr' ? 
                        'Le sujet du post doit contenir au moins 10 caractères pour une génération optimale.' :
                        'The post subject must contain at least 10 characters for optimal generation.';
                    
                    this.showNotification(errorMessage, 'warning');
                    console.warn('⚠️ Sujet trop court:', subject.length);
                }
                
                console.log('✅ Validation réussie, début de la génération...');
                
                this.setLoadingState(true);
                
                try {
                    // Génération du post avec TOUS les paramètres
                    const post = await this.generatePostContent(
                        subject.trim(), 
                        audience.trim(), 
                        tone.trim(), 
                        postLanguage.trim(),
                        selectedModel.trim() // Ajout du modèle sélectionné
                    );
                    
                    if (post && post.trim()) {
                        console.log('✅ Post généré avec succès, début de l\'affichage...');
                        
                        // Afficher le post avec gestion d'erreur robuste
                        try {
                            this.displayPost(post);
                            console.log('✅ displayPost terminé sans erreur');
                        } catch (displayError) {
                            console.error('❌ Erreur critique dans displayPost:', displayError);
                            console.error('Stack trace displayPost:', displayError.stack);
                            
                            // Tentative de récupération
                            try {
                                console.log('🔄 Tentative de récupération...');
                                
                                // Affichage minimal en cas d'erreur
                                if (this.elements.postContent && this.elements.postResult) {
                                    this.elements.postContent.textContent = post;
                                    this.elements.postResult.style.display = 'block';
                                    this.enablePublishButton();
                                    console.log('✅ Récupération réussie avec affichage minimal');
                                } else {
                                    throw new Error('Éléments DOM manquants');
                                }
                            } catch (recoveryError) {
                                console.error('❌ Échec de la récupération:', recoveryError);
                                this.showNotification(
                                    this.currentLanguage === 'fr' ? 
                                        'Post généré mais erreur d\'affichage. Vérifiez la console.' : 
                                        'Post generated but display error. Check console.',
                                    'warning'
                                );
                                return;
                            }
                        }
                        
                        // Notification de succès séparée
                        setTimeout(() => {
                            try {
                                this.showNotification(
                                    this.currentLanguage === 'fr' ? 'Post généré avec succès !' : 'Post generated successfully!',
                                    'success'
                                );
                            } catch (notifError) {
                                console.warn('⚠️ Erreur notification génération:', notifError);
                            }
                        }, 300);
                        
                        console.log('🎉 Processus de génération et affichage terminé');
                        
                    } else {
                        throw new Error('Aucun contenu généré');
                    }
                } catch (error) {
                    console.error('❌ Erreur lors de la génération:', error);
                    
                    let errorMessage = this.currentLanguage === 'fr' ? 
                        'Erreur lors de la génération du post.' : 
                        'Error during post generation.';
                    
                    if (error.message.includes('Timeout')) {
                        errorMessage = this.currentLanguage === 'fr' ? 
                            'Délai d\'attente dépassé (5 minutes). Le LLM n\'a pas pu terminer sa réponse. Veuillez réessayer.' : 
                            'Timeout exceeded (5 minutes). The LLM could not complete its response. Please try again.';
                    } else if (error.message.includes('réseau') || error.message.includes('network')) {
                        errorMessage = this.currentLanguage === 'fr' ? 
                            'Problème de connexion. Vérifiez votre connexion internet.' : 
                            'Connection issue. Please check your internet connection.';
                    }
                    
                    this.showNotification(errorMessage, 'error');
                } finally {
                    this.setLoadingState(false);
                }
            }
            
            setLoadingState(isLoading) {
                console.log(`🔄 setLoadingState: ${isLoading}`);
                
                if (!this.elements.generateBtn) {
                    console.warn('⚠️ Bouton de génération non trouvé');
                    return;
                }
                
                if (isLoading) {
                    // Sauvegarder le texte original si pas encore fait
                    if (!this.originalBtnText) {
                    this.originalBtnText = this.elements.generateBtn.innerHTML;
                    }
                    
                    // Désactiver le bouton et afficher l'état de chargement
                    this.elements.generateBtn.disabled = true;
                    this.elements.generateBtn.classList.add('loading-state');
                    
                    const loadingText = this.currentLanguage === 'fr' ? 'Génération...' : 'Generating...';
                    this.elements.generateBtn.innerHTML = `
                        <span class="loading-spinner"></span>
                        <span>${loadingText}</span>
                    `;
                    
                    console.log('✅ État de chargement activé');
                } else {
                    // Restaurer l'état normal
                    this.elements.generateBtn.disabled = false;
                    this.elements.generateBtn.classList.remove('loading-state');
                    
                    if (this.originalBtnText) {
                    this.elements.generateBtn.innerHTML = this.originalBtnText;
                    } else {
                        // Fallback si le texte original n'est pas disponible
                        const defaultText = this.currentLanguage === 'fr' ? 'Générer mon post LinkedIn' : 'Generate my LinkedIn post';
                        this.elements.generateBtn.innerHTML = `
                            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2zm0 18a8 8 0 0 1-8-8 8 8 0 0 1 8-8 8 8 0 0 1 8 8 8 8 0 0 1-8 8z"/>
                                <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" fill="none"/>
                            </svg>
                            <span>${defaultText}</span>
                        `;
                    }
                    
                    console.log('✅ État normal restauré');
                }
            }
            
            showAlert(message, type = 'info') {
                // Utiliser le nouveau système de notifications
                this.showNotification(message, type);
            }

            // Helpers centralisés pour l'état du bouton Publier
            enablePublishButton() {
                if (!this.elements.publishLinkedInBtn) return;
                const btn = this.elements.publishLinkedInBtn;
                console.log('🔧 Activation du bouton Publier...');
                btn.style.display = 'inline-flex';
                btn.disabled = false;
                btn.classList.remove('disabled');
                btn.classList.add('active');
                btn.style.pointerEvents = 'auto';
                btn.style.opacity = '1';
                btn.style.cursor = 'pointer';
                btn.style.zIndex = '10';
                console.log('✅ Bouton Publier activé avec tous les styles');
            }
            
            disablePublishButton() {
                if (!this.elements.publishLinkedInBtn) return;
                const btn = this.elements.publishLinkedInBtn;
                console.log('🔧 Désactivation du bouton Publier...');
                btn.style.display = 'none';
                btn.disabled = true;
                btn.classList.add('disabled');
                btn.classList.remove('active');
                btn.style.pointerEvents = 'none';
                console.log('✅ Bouton Publier désactivé');
            }

            updateActionButtonsState(hasContent) {
                console.log(`🔄 updateActionButtonsState: ${hasContent}`);
                
                // Activer/désactiver le bouton de publication LinkedIn
                if (this.elements.publishLinkedInBtn) {
                    console.log('🔵 Bouton LinkedIn trouvé, mise à jour:', { hasContent });
                    if (hasContent) {
                        this.enablePublishButton();
                        console.log('🔵 Bouton LinkedIn affiché et activé');
                    } else {
                        this.disablePublishButton();
                        console.log('🔵 Bouton LinkedIn masqué');
                    }
                } else {
                    console.log('❌ Bouton LinkedIn non trouvé dans les éléments');
                    // Afficher le bouton de debug si présent
                    const debugBtn = document.getElementById('debugActivateBtn');
                    if (debugBtn) {
                        debugBtn.style.display = 'inline-block';
                    }
                }
                
                console.log('✅ État des boutons d\'action mis à jour');
            }

            async generatePostContent(subject, audience, tone, language, model) {
                console.log('🔍 generatePostContent appelé avec:', { subject, audience, tone, language, model });
                
                // Vérifier que le modèle est bien fourni
                if (!model || !model.trim()) {
                    console.error('❌ Aucun modèle IA fourni');
                    throw new Error('Modèle IA requis pour la génération');
                }
                
                console.log('🔍 Modèle sélectionné:', model);
                
                // Utiliser Ollama avec le modèle fourni
                    try {
                        console.log('🚀 Tentative de génération avec Ollama...');
                    const result = await this.generateWithOllama(subject, audience, tone, language, model);
                    
                    if (result && result.trim()) {
                        console.log('✅ Résultat Ollama généré avec succès');
                        return result;
                    } else {
                        throw new Error('Résultat Ollama vide ou invalide');
                    }
                    } catch (error) {
                        console.error('❌ Erreur génération Ollama:', error);
                        console.log('🔄 Fallback vers la génération locale...');
                    
                    // Notifier l'utilisateur du fallback
                    this.showNotification(
                        this.currentLanguage === 'fr' ? 
                            'Génération Ollama échouée, utilisation du mode local...' : 
                            'Ollama generation failed, using local mode...',
                            'warning'
                    );
                    
                        // Fallback vers la génération locale
                    return this.generateLocalFallback(subject, audience, tone, language);
                }
            }
            
            // Génération avec Ollama
            async generateWithOllama(subject, audience, tone, language, model) {
                console.log('🚀 generateWithOllama appelé avec:', { subject, audience, tone, language, model });
                
                const ollamaUrl = 'http://82.29.172.185:11434';
                const endpoint = '/api/chat';
                
                // Prompt personnalisé basé sur les paramètres
                const prompt = `Tu es un expert en contenu LinkedIn. Rédige un post à la première personne destiné à être publié sur LinkedIn.

CONTEXTE :
- Sujet : ${subject}
- Audience cible : ${audience}
- Ton souhaité : ${tone}
- Langue : ${language === 'fr' ? 'français' : 'anglais'}

INSTRUCTIONS :
- Rédige un post professionnel et engageant
- Utilise le ton ${tone} approprié
- Adapte le contenu à l'audience ${audience}
- Inclus des emojis pertinents
- Ajoute 3-5 hashtags pertinents à la fin
- Limite le post à 1300 caractères maximum
- Utilise la première personne du singulier
- Sois authentique et personnel

FORMAT :
- Introduction accrocheuse
- Contenu principal structuré
- Conclusion engageante
- Hashtags pertinents

Génère maintenant le post LinkedIn :`;
                
                console.log('📝 Prompt envoyé à Ollama:', prompt);

                // Appel à l'API Ollama avec timeout étendu pour permettre des réponses complètes
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 300000); // 300 secondes (5 minutes)
                
                try {
                    const response = await fetch(`${ollamaUrl}${endpoint}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            model: model,
                            messages: [
                                {
                                    role: 'user',
                                    content: prompt
                                }
                            ],
                            stream: false
                        }),
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId);
                    
                    if (!response.ok) {
                        throw new Error(`Erreur API Ollama: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    console.log('📥 Réponse brute d\'Ollama:', data);
                    
                    if (data.error) {
                        throw new Error(`Erreur modèle Ollama: ${data.error}`);
                    }
                    
                    // Extraire le contenu généré - gérer différentes structures de réponse
                    let generatedContent = '';
                    
                    if (data.message && data.message.content) {
                        generatedContent = data.message.content;
                    } else if (data.response) {
                        generatedContent = data.response;
                    } else if (data.content) {
                        generatedContent = data.content;
                    } else if (data.text) {
                        generatedContent = data.text;
                    } else if (data.choices && data.choices[0] && data.choices[0].message) {
                        generatedContent = data.choices[0].message.content;
                    } else if (data.choices && data.choices[0] && data.choices[0].text) {
                        generatedContent = data.choices[0].text;
                    }
                    
                    console.log('🔍 Contenu extrait:', generatedContent);
                    console.log('🔍 Structure de réponse:', Object.keys(data));
                    
                    if (!generatedContent || !generatedContent.trim()) {
                        console.error('❌ Structure de réponse inattendue:', data);
                        throw new Error('Aucun contenu généré par Ollama - structure de réponse inattendue');
                    }
                    
                    const finalContent = generatedContent.trim();
                    console.log('✅ Contenu final retourné:', finalContent);
                    return finalContent;
                    
                } catch (fetchError) {
                    clearTimeout(timeoutId);
                    if (fetchError.name === 'AbortError') {
                        throw new Error('Timeout Ollama - délai d\'attente dépassé');
                    }
                    throw fetchError;
                }
            }
            
            // Génération locale de fallback
            generateLocalFallback(subject, audience, tone, language) {
                // Pas de délai pour la génération locale
                
                // Templates d'introduction basés sur le ton
                const introTemplates = {
                    fr: {
                        professional: [
                            "💼 Réflexion professionnelle :",
                            "📊 Point de vue expert :",
                            "🎯 Focus professionnel :",
                            "💡 Analyse du secteur :"
                        ],
                        inspirational: [
                            "✨ Source d'inspiration :",
                            "🌟 Réflexion inspirante :",
                            "🚀 Moment de motivation :",
                            "💫 Pensée du jour :"
                        ],
                        casual: [
                            "💭 Petite réflexion :",
                            "🗣️ Parlons de ça :",
                            "💬 Mon point de vue :",
                            "🤔 Je me disais que :"
                        ],
                        educational: [
                            "📚 Leçon apprise :",
                            "🎓 Partage d'expérience :",
                            "📖 Ce que j'ai découvert :",
                            "💡 Enseignement du terrain :"
                        ],
                        motivational: [
                            "💪 Motivation du jour :",
                            "🔥 Élan motivant :",
                            "⚡ Boost d'énergie :",
                            "🎯 Challenge personnel :"
                        ],
                        thoughtful: [
                            "🤔 Réflexion profonde :",
                            "💭 Pensée du moment :",
                            "🧠 Analyse réfléchie :",
                            "⏳ Prise de recul :"
                        ]
                    },
                    en: {
                        professional: [
                            "💼 Professional insight:",
                            "📊 Expert perspective:",
                            "🎯 Business focus:",
                            "💡 Industry analysis:"
                        ],
                        inspirational: [
                            "✨ Inspiration moment:",
                            "🌟 Motivating thought:",
                            "🚀 Daily motivation:",
                            "💫 Thought of the day:"
                        ],
                        casual: [
                            "💭 Quick thought:",
                            "🗣️ Let's talk about:",
                            "💬 My take on:",
                            "🤔 Just thinking:"
                        ],
                        educational: [
                            "📚 Lesson learned:",
                            "🎓 Experience sharing:",
                            "📖 What I discovered:",
                            "💡 Field insight:"
                        ],
                        motivational: [
                            "💪 Daily motivation:",
                            "🔥 Energy boost:",
                            "⚡ Power thought:",
                            "🎯 Personal challenge:"
                        ],
                        thoughtful: [
                            "🤔 Deep reflection:",
                            "💭 Thoughtful moment:",
                            "🧠 Careful analysis:",
                            "⏳ Taking perspective:"
                        ]
                    }
                };
                
                // Conclusions basées sur l'audience
                const conclusionTemplates = {
                    fr: {
                        professionals: [
                            "Quelle est votre expérience sur ce sujet ?",
                            "Comment gérez-vous cela dans votre secteur ?",
                            "Vos retours d'expérience m'intéressent !",
                            "Qu'en pensent les experts de votre domaine ?"
                        ],
                        juniors: [
                            "Avez-vous déjà vécu cette situation ?",
                            "Comment abordez-vous ce défi ?",
                            "Vos questions et retours sont les bienvenus !",
                            "Partagez votre point de vue en commentaire !"
                        ],
                        entrepreneurs: [
                            "Comment intégrez-vous cela dans votre stratégie ?",
                            "Quelle est votre approche entrepreneuriale ?",
                            "Partagez vos succès et échecs !",
                            "Vos retours d'entrepreneur m'intéressent !"
                        ],
                        managers: [
                            "Comment l'appliquez-vous avec vos équipes ?",
                            "Quelle est votre stratégie de management ?",
                            "Partagez vos bonnes pratiques !",
                            "Vos expériences de leader sont précieuses !"
                        ],
                        students: [
                            "Qu'en pensez-vous pour votre future carrière ?",
                            "Comment vous préparez-vous à cela ?",
                            "Vos questions sont les bienvenues !",
                            "Partagez vos réflexions d'étudiant !"
                        ],
                        recruiters: [
                            "Comment évaluez-vous cela chez les candidats ?",
                            "Quelle importance dans vos recrutements ?",
                            "Partagez votre expertise RH !",
                            "Vos conseils de recruteur sont précieux !"
                        ]
                    },
                    en: {
                        professionals: [
                            "What's your experience with this?",
                            "How do you handle this in your industry?",
                            "I'd love to hear your insights!",
                            "What do experts in your field think?"
                        ],
                        juniors: [
                            "Have you experienced this situation?",
                            "How do you approach this challenge?",
                            "Your questions and feedback are welcome!",
                            "Share your perspective in the comments!"
                        ],
                        entrepreneurs: [
                            "How do you integrate this into your strategy?",
                            "What's your entrepreneurial approach?",
                            "Share your successes and failures!",
                            "Your entrepreneur insights interest me!"
                        ],
                        managers: [
                            "How do you apply this with your teams?",
                            "What's your management strategy?",
                            "Share your best practices!",
                            "Your leadership experiences are valuable!"
                        ],
                        students: [
                            "What do you think for your future career?",
                            "How are you preparing for this?",
                            "Your questions are welcome!",
                            "Share your student reflections!"
                        ],
                        recruiters: [
                            "How do you evaluate this in candidates?",
                            "How important is this in your recruiting?",
                            "Share your HR expertise!",
                            "Your recruiter advice is valuable!"
                        ]
                    }
                };
                
                // Sélection aléatoire des templates
                const intros = introTemplates[language][tone] || introTemplates[language]['professional'];
                const conclusions = conclusionTemplates[language][audience] || conclusionTemplates[language]['professionals'];
                
                const intro = intros[Math.floor(Math.random() * intros.length)];
                const conclusion = conclusions[Math.floor(Math.random() * conclusions.length)];
                
                // Génération des hashtags basés sur le contenu
                const generateHashtags = (subjectText, audience) => {
                    const commonTags = language === 'fr' ? 
                        ['#LinkedIn', '#Carrière', '#Professionnel'] : 
                        ['#LinkedIn', '#Career', '#Professional'];
                    
                    const audienceTags = {
                        professionals: language === 'fr' ? ['#Expertise', '#Expérience'] : ['#Expertise', '#Experience'],
                        juniors: language === 'fr' ? ['#DébutCarrière', '#Apprentissage'] : ['#EarlyCareer', '#Learning'],
                        entrepreneurs: language === 'fr' ? ['#Entrepreneuriat', '#Innovation'] : ['#Entrepreneurship', '#Innovation'],
                        managers: language === 'fr' ? ['#Leadership', '#Management'] : ['#Leadership', '#Management'],
                        students: language === 'fr' ? ['#Étudiant', '#Formation'] : ['#Student', '#Education'],
                        recruiters: language === 'fr' ? ['#Recrutement', '#RH'] : ['#Recruiting', '#HR']
                    };
                    
                    return [...commonTags, ...(audienceTags[audience] || [])].slice(0, 5);
                };
                
                const hashtags = generateHashtags(subject, audience).join(' ');
                
                // Construction du post final
                return `${intro}\n\n${subject}\n\n${conclusion}\n\n${hashtags}`;
            }
            
            // Gestion des onglets
            switchTab(tabName) {
                // Mettre à jour les boutons d'onglets
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
                
                if (tabName === 'create') {
                    this.elements.createTabBtn?.classList.add('active');
                    this.elements.createTab?.classList.add('active');
                } else if (tabName === 'saved') {
                    this.elements.savedTabBtn?.classList.add('active');
                    this.elements.savedTab?.classList.add('active');
                    this.loadSavedPosts();
                }
            }
            
            // Sauvegarde des posts avec Supabase
            async savePost() {
                if (!supabase || !this.user) {
                    this.showError('Vous devez être connecté pour sauvegarder.');
                    return;
                }
                
                const content = this.elements.postContent?.textContent;
                if (!content) return;
                
                const formData = new FormData(this.elements.postForm);
                const postData = {
                    user_id: this.user.id,
                    content: content,
                    subject: formData.get('subject') || '',
                    audience: formData.get('audience') || '',
                    tone: formData.get('tone') || '',
                    language: formData.get('postLanguage') || 'fr'
                };
                
                // Indicateur de chargement
                this.setSaveButtonLoading(true);
                
                try {
                    const { data, error } = await supabase
                        .from('posts')
                        .insert([postData])
                        .select();
                    
                    if (error) throw error;
                    
                    // Sauvegarder aussi en localStorage comme backup
                    this.saveToLocalStorage(data[0]);
                    
                    this.updatePostCount();
                    this.showSaveSuccess();
                    
                    // Recharger la liste si on est sur l'onglet posts
                    if (this.currentPage === 'dashboard' && this.elements.savedTab?.classList.contains('active')) {
                        this.loadSavedPosts();
                    }
                    
                } catch (error) {
                    console.error('Erreur sauvegarde Supabase:', error);
                    
                    // Fallback vers localStorage
                    const localPost = {
                        id: Date.now().toString(),
                        ...postData,
                        created_at: new Date().toISOString(),
                        synced: false
                    };
                    this.saveToLocalStorage(localPost);
                    this.showError('Post sauvegardé localement. Synchronisation en cours...');
                    
                } finally {
                    this.setSaveButtonLoading(false);
                }
            }
            
            setSaveButtonLoading(isLoading) {
                const btn = this.elements.savePostBtn;
                if (!btn) return;
                
                if (isLoading) {
                    btn.disabled = true;
                    btn.innerHTML = `
                        <div class="loading" style="width: 16px; height: 16px; margin-right: 8px;"></div>
                        <span>Sauvegarde...</span>
                    `;
                } else {
                    btn.disabled = false;
                    btn.innerHTML = `
                        <svg class="icon" viewBox="0 0 24 24">
                            <path d="M17 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                        </svg>
                        <span>${translations[this.currentLanguage].savePostText}</span>
                    `;
                }
            }
            
            // Sauvegarde en localStorage (backup)
            saveToLocalStorage(post) {
                try {
                    if (!this.user) return;
                    const userKey = `linkedinpost_saved_posts_${this.user.id}`;
                    const existingPosts = this.getLocalPosts();
                    const updatedPosts = [...existingPosts, post];
                    localStorage.setItem(userKey, JSON.stringify(updatedPosts));
                } catch (error) {
                    console.error('Erreur sauvegarde locale:', error);
                }
            }
            
            getLocalPosts() {
                try {
                    if (!this.user) return [];
                    const userKey = `linkedinpost_saved_posts_${this.user.id}`;
                    const posts = localStorage.getItem(userKey);
                    return posts ? JSON.parse(posts) : [];
                } catch (error) {
                    console.error('Erreur lecture locale:', error);
                    return [];
                }
            }
            
            // Nouvelles méthodes Supabase
            async getSavedPosts() {
                if (!supabase || !this.user) {
                    return this.getLocalPosts();
                }
                
                try {
                    const { data, error } = await supabase
                        .from('posts')
                        .select('*')
                        .eq('user_id', this.user.id)
                        .order('created_at', { ascending: false });
                    
                    if (error) throw error;
                    
                    // Synchroniser avec localStorage
                    if (data) {
                        const userKey = `linkedinpost_saved_posts_${this.user.id}`;
                        localStorage.setItem(userKey, JSON.stringify(data));
                    }
                    
                    return data || [];
                    
                } catch (error) {
                    console.error('Erreur chargement Supabase:', error);
                    // Fallback vers localStorage
                    return this.getLocalPosts();
                }
            }
            
            async loadSavedPosts() {
                const container = this.elements.savedPostsContainer;
                if (!container) return;
                
                // Afficher un loader
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <div class="loading" style="width: 32px; height: 32px; margin: 0 auto 1rem;"></div>
                        <p style="color: rgba(255, 255, 255, 0.7);">Chargement de vos posts...</p>
                    </div>
                `;
                
                const posts = await this.getSavedPosts();
                
                if (posts.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
                            </svg>
                            <h3>${translations[this.currentLanguage].emptyStateTitle}</h3>
                            <p>${translations[this.currentLanguage].emptyStateDescription}</p>
                        </div>
                    `;
                    return;
                }
                
                const postsHtml = posts.map(post => this.createPostItemHtml(post)).join('');
                container.innerHTML = postsHtml;
            }
            
            createPostItemHtml(post) {
                const audienceLabels = {
                    fr: {
                        professionals: 'Professionnels expérimentés',
                        juniors: 'Jeunes professionnels',
                        entrepreneurs: 'Entrepreneurs',
                        managers: 'Managers',
                        students: 'Étudiants',
                        recruiters: 'Recruteurs'
                    },
                    en: {
                        professionals: 'Experienced professionals',
                        juniors: 'Young professionals',
                        entrepreneurs: 'Entrepreneurs',
                        managers: 'Managers',
                        students: 'Students',
                        recruiters: 'Recruiters'
                    }
                };
                
                const toneLabels = {
                    fr: {
                        professional: 'Professionnel',
                        inspirational: 'Inspirant',
                        casual: 'Décontracté',
                        educational: 'Éducatif',
                        motivational: 'Motivant',
                        thoughtful: 'Réfléchi'
                    },
                    en: {
                        professional: 'Professional',
                        inspirational: 'Inspirational',
                        casual: 'Casual',
                        educational: 'Educational',
                        motivational: 'Motivational',
                        thoughtful: 'Thoughtful'
                    }
                };
                
                const audienceLabel = audienceLabels[post.language]?.[post.audience] || post.audience;
                const toneLabel = toneLabels[post.language]?.[post.tone] || post.tone;
                
                // Formatage de la date
                const createdAt = new Date(post.created_at);
                const formattedDate = createdAt.toLocaleDateString(this.currentLanguage === 'fr' ? 'fr-FR' : 'en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                // Indicateur de synchronisation
                const syncIndicator = post.synced === false ? 
                    `<span style="color: #f39c12; font-size: 0.8rem;">📡 Non synchronisé</span>` : '';
                
                return `
                    <div class="saved-post-item" data-post-id="${post.id}">
                        <div class="saved-post-header">
                            <div class="saved-post-meta">
                                <div class="saved-post-date">${formattedDate} ${syncIndicator}</div>
                                <div class="saved-post-info">${audienceLabel} • ${toneLabel} • ${post.language.toUpperCase()}</div>
                            </div>
                            <div class="saved-post-actions">
                                <button class="action-btn copy" onclick="app.copyPostContent('${post.id}')">
                                    <svg class="icon" viewBox="0 0 24 24">
                                        <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                                    </svg>
                                    ${this.currentLanguage === 'fr' ? 'Copier' : 'Copy'}
                                </button>
                                <button class="action-btn edit" onclick="app.editPost('${post.id}')">
                                    <svg class="icon" viewBox="0 0 24 24">
                                        <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                    </svg>
                                    ${this.currentLanguage === 'fr' ? 'Modifier' : 'Edit'}
                                </button>
                                <button class="action-btn delete" onclick="app.deletePost('${post.id}')">
                                    <svg class="icon" viewBox="0 0 24 24">
                                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                                    </svg>
                                    ${this.currentLanguage === 'fr' ? 'Supprimer' : 'Delete'}
                                </button>
                            </div>
                        </div>
                        <div class="saved-post-content">${post.content}</div>
                        <div class="edit-form" id="editForm${post.id}">
                            <textarea id="editTextarea${post.id}">${post.content}</textarea>
                            <div class="edit-form-actions">
                                <button class="action-btn" onclick="app.cancelEdit('${post.id}')">
                                    ${this.currentLanguage === 'fr' ? 'Annuler' : 'Cancel'}
                                </button>
                                <button class="action-btn edit" onclick="app.saveEdit('${post.id}')">
                                    ${this.currentLanguage === 'fr' ? 'Sauvegarder' : 'Save'}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            async copyPostContent(postId) {
                const posts = await this.getSavedPosts();
                const post = posts.find(p => p.id === postId);
                if (post) {
                    const success = await this.copyToClipboard(post.content);
                    if (success) {
                        this.showNotification(this.currentLanguage === 'fr' ? 'Copié !' : 'Copied!', 'success');
                    } else {
                        this.showNotification(this.currentLanguage === 'fr' ? 'Erreur de copie.' : 'Copy error.', 'error');
                    }
                }
            }
            
            async copyToClipboard(text) {
                try {
                    await navigator.clipboard.writeText(text);
                    this.showCopySuccess();
                } catch (err) {
                    this.fallbackCopy(text);
                }
            }
            
            editPost(postId) {
                const editForm = document.getElementById(`editForm${postId}`);
                const postItem = document.querySelector(`[data-post-id="${postId}"]`);
                
                if (editForm && postItem) {
                    editForm.classList.add('active');
                    postItem.querySelector('.saved-post-content').style.display = 'none';
                }
            }
            
            cancelEdit(postId) {
                const editForm = document.getElementById(`editForm${postId}`);
                const postItem = document.querySelector(`[data-post-id="${postId}"]`);
                
                if (editForm && postItem) {
                    editForm.classList.remove('active');
                    postItem.querySelector('.saved-post-content').style.display = 'block';
                }
            }
            
            async saveEdit(postId) {
                const textarea = document.getElementById(`editTextarea${postId}`);
                const newContent = textarea?.value;
                
                if (!newContent || !supabase || !this.user) return;
                
                try {
                    const { data, error } = await supabase
                        .from('posts')
                        .update({ 
                            content: newContent,
                            updated_at: new Date().toISOString()
                        })
                        .eq('id', postId)
                        .eq('user_id', this.user.id)
                        .select();
                    
                    if (error) throw error;
                    
                    this.loadSavedPosts();
                    
                } catch (error) {
                    console.error('Erreur mise à jour:', error);
                    this.showError('Erreur lors de la mise à jour du post.');
                }
            }
            
            async deletePost(postId) {
                const confirmMessage = this.currentLanguage === 'fr' ? 
                    'Êtes-vous sûr de vouloir supprimer ce post ?' : 
                    'Are you sure you want to delete this post?';
                
                if (!confirm(confirmMessage) || !supabase || !this.user) return;
                
                try {
                    const { error } = await supabase
                        .from('posts')
                        .delete()
                        .eq('id', postId)
                        .eq('user_id', this.user.id);
                    
                    if (error) throw error;
                    
                    this.loadSavedPosts();
                    this.updatePostCount();
                    
                } catch (error) {
                    console.error('Erreur suppression:', error);
                    this.showError('Erreur lors de la suppression du post.');
                }
            }
            
            async updatePostCount() {
                if (!this.user) return;
                
                try {
                    if (supabase) {
                        const { count, error } = await supabase
                            .from('posts')
                            .select('*', { count: 'exact', head: true })
                            .eq('user_id', this.user.id);
                        
                        if (!error && this.elements.postCount) {
                            this.elements.postCount.textContent = count || 0;
                        }
                    } else {
                        // Fallback localStorage
                        const localPosts = this.getLocalPosts();
                        if (this.elements.postCount) {
                            this.elements.postCount.textContent = localPosts.length;
                        }
                    }
                } catch (error) {
                    console.error('Erreur comptage posts:', error);
                }
            }
            
            showSaveSuccess() {
                const btn = this.elements.savePostBtn;
                if (!btn) return;
                
                const originalText = btn.innerHTML;
                const successText = this.currentLanguage === 'fr' ? 'Sauvegardé !' : 'Saved!';
                
                btn.innerHTML = `
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    <span>${successText}</span>
                `;
                
                setTimeout(() => {
                    btn.innerHTML = originalText;
                }, 2000);
            }
            
            // Fonctionnalités supplémentaires
            exportPosts() {
                const posts = this.getSavedPosts();
                const dataStr = JSON.stringify(posts, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(dataBlob);
                link.download = `linkedinpost_export_${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
            
            triggerImport() {
                document.getElementById('importFile')?.click();
            }
            
            importPosts(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const importedPosts = JSON.parse(e.target.result);
                        if (Array.isArray(importedPosts)) {
                            const existingPosts = this.getSavedPosts();
                            const mergedPosts = [...existingPosts, ...importedPosts];
                            this.savePosts(mergedPosts);
                            this.loadSavedPosts();
                            this.updatePostCount();
                            this.showAlert(this.currentLanguage === 'fr' ? 
                                `${importedPosts.length} posts importés avec succès!` :
                                `${importedPosts.length} posts imported successfully!`);
                        }
                    } catch (error) {
                        this.showAlert(this.currentLanguage === 'fr' ? 
                            'Erreur lors de l\'importation du fichier.' :
                            'Error importing file.');
                    }
                };
                reader.readAsText(file);
                event.target.value = ''; // Reset file input
            }
            
            async searchPosts(query) {
                const posts = await this.getSavedPosts();
                const filteredPosts = query.trim() === '' ? posts : 
                    posts.filter(post => 
                        post.content.toLowerCase().includes(query.toLowerCase()) ||
                        post.subject.toLowerCase().includes(query.toLowerCase())
                    );
                
                this.displayFilteredPosts(filteredPosts);
            }
            
            displayFilteredPosts(posts) {
                const container = this.elements.savedPostsContainer;
                if (!container) return;
                
                if (posts.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <svg class="icon" viewBox="0 0 24 24">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                            <h3>${this.currentLanguage === 'fr' ? 'Aucun résultat' : 'No results'}</h3>
                            <p>${this.currentLanguage === 'fr' ? 'Aucun post ne correspond à votre recherche.' : 'No posts match your search.'}</p>
                        </div>
                    `;
                    return;
                }
                
                const postsHtml = posts.map(post => this.createPostItemHtml(post)).join('');
                container.innerHTML = postsHtml;
            }
            
            // Synchronisation des posts locaux vers Supabase
            async syncLocalPosts() {
                if (!supabase || !this.user) return;
                
                const localPosts = this.getLocalPosts();
                const unsyncedPosts = localPosts.filter(post => post.synced === false);
                
                if (unsyncedPosts.length === 0) return;
                
                console.log(`Synchronisation de ${unsyncedPosts.length} posts...`);
                
                for (const post of unsyncedPosts) {
                    try {
                        const { data, error } = await supabase
                            .from('posts')
                            .insert([{
                                user_id: this.user.id,
                                content: post.content,
                                subject: post.subject,
                                audience: post.audience,
                                tone: post.tone,
                                language: post.language,
                                created_at: post.created_at
                            }])
                            .select();
                        
                        if (error) throw error;
                        
                        // Marquer comme synchronisé
                        post.synced = true;
                        
                    } catch (error) {
                        console.error('Erreur sync post:', error);
                    }
                }
                
                // Mettre à jour localStorage
                const userKey = `linkedinpost_saved_posts_${this.user.id}`;
                localStorage.setItem(userKey, JSON.stringify(localPosts));
                
                // Recharger les posts
                this.loadSavedPosts();
                this.updatePostCount();
            }

            displayPost(content) {
                console.log('🔍 displayPost appelé avec:', content);
                console.log('🔍 Éléments disponibles:', this.elements);
                
                // Validation du contenu
                if (!content || typeof content !== 'string') {
                    console.error('❌ Contenu invalide:', content);
                    this.showNotification(
                        this.currentLanguage === 'fr' ? 
                            'Erreur : contenu du post invalide' : 
                            'Error: invalid post content',
                        'error'
                    );
                    return;
                }
                
                if (!this.elements.postContent || !this.elements.postResult) {
                    console.error('❌ Éléments manquants:', {
                        postContent: this.elements.postContent,
                        postResult: this.elements.postResult
                    });
                    this.showNotification(
                        this.currentLanguage === 'fr' ? 
                            'Erreur : éléments d\'affichage manquants' : 
                            'Error: display elements missing',
                        'error'
                    );
                    return;
                }
                
                requestAnimationFrame(() => {
                    try {
                        console.log('🔄 Début du processus d\'affichage...');
                        
                        // Nettoyer le contenu précédent
                        console.log('🧹 Nettoyage du contenu précédent...');
                        this.elements.postContent.innerHTML = '';
                        
                        // Formater et afficher le nouveau contenu
                        console.log('🎨 Formatage du contenu...');
                        const formattedContent = content
                            .replace(/\n\n/g, '</p><p>') // Paragraphes
                            .replace(/\n/g, '<br>') // Retours à la ligne
                            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Gras
                            .replace(/\*(.*?)\*/g, '<em>$1</em>') // Italique
                            .replace(/#(\w+)/g, '<span class="hashtag">#$1</span>'); // Hashtags
                        
                        // Créer la structure HTML
                        console.log('🏗️ Création de la structure HTML...');
                        const htmlContent = `<p>${formattedContent}</p>`;
                        this.elements.postContent.innerHTML = htmlContent;
                        console.log('✅ Contenu HTML inséré');
                        
                        // Afficher la section de résultat
                        console.log('👁️ Affichage de la section résultat...');
                        this.elements.postResult.style.display = 'block';
                        console.log('✅ Section résultat affichée');
                        
                        // Scroll vers le résultat avec gestion d'erreur
                        console.log('📜 Tentative de scroll vers le résultat...');
                        try {
                            // Utiliser setTimeout pour éviter le blocage du scroll
                            setTimeout(() => {
                                try {
                                    this.elements.postResult.scrollIntoView({
                                        behavior: 'smooth',
                                        block: 'start'
                                    });
                                    console.log('✅ Scroll effectué avec succès');
                                } catch (scrollError) {
                                    console.warn('⚠️ Erreur de scroll (non bloquante):', scrollError);
                                    // Fallback : scroll sans animation
                                    this.elements.postResult.scrollIntoView(false);
                                }
                            }, 100);
                        } catch (scrollError) {
                            console.warn('⚠️ Erreur scroll initial (non bloquante):', scrollError);
                        }
                        
                        // Mettre à jour l'état des boutons d'action
                        console.log('🔘 Mise à jour de l\'état des boutons...');
                        try {
                            this.updateActionButtonsState(true);
                            console.log('✅ Boutons mis à jour avec succès');
                        } catch (buttonError) {
                            console.error('❌ Erreur lors de la mise à jour des boutons:', buttonError);
                            // Continuer malgré l'erreur
                        }
                        
                        console.log('✅ Post affiché avec succès');
                        
                        // Notifier l'utilisateur du succès avec délai pour éviter le blocage
                        console.log('📢 Envoi de la notification de succès...');
                        setTimeout(() => {
                            try {
                                this.showNotification(
                                    this.currentLanguage === 'fr' ? 
                                        'Post affiché avec succès !' : 
                                        'Post displayed successfully!',
                                    'success'
                                );
                                console.log('✅ Notification envoyée');
                            } catch (notifError) {
                                console.warn('⚠️ Erreur notification (non bloquante):', notifError);
                            }
                        }, 200);
                        
                        // Log final pour confirmer la fin du processus
                        console.log('🎉 Processus d\'affichage terminé sans blocage');
                        
                    } catch (error) {
                        console.error('❌ Erreur lors de l\'affichage:', error);
                        console.error('Stack trace:', error.stack);
                        
                        // Notification d'erreur avec gestion de fallback
                        try {
                            this.showNotification(
                                this.currentLanguage === 'fr' ? 
                                    'Erreur lors de l\'affichage du post' : 
                                    'Error displaying post',
                                'error'
                            );
                        } catch (notifError) {
                            console.error('❌ Erreur notification critique:', notifError);
                            // Fallback : alerte simple
                            alert('Erreur lors de l\'affichage du post');
                        }
                    }
                });
            }

            async copyToClipboard(text) {
                try {
                    await navigator.clipboard.writeText(text);
                    return true;
                } catch (err) {
                    console.error('Erreur de copie:', err);
                    return this.fallbackCopy(text);
                }
            }

            fallbackCopy(text) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                Object.assign(textArea.style, {
                    position: 'fixed',
                    left: '-999999px',
                    top: '-999999px'
                });
                
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                
                let success = false;
                try {
                    success = document.execCommand('copy');
                } catch (err) {
                    success = false;
                }

                document.body.removeChild(textArea);
                return success;
            }

            // Modal de profil LinkedIn
            showProfileModal() {
                const modal = document.createElement('div');
                modal.className = 'profile-modal';
                modal.innerHTML = `
                    <div class="profile-modal-content">
                        <div class="profile-modal-header">
                            <h2 id="profileModalTitle">Profil LinkedIn</h2>
                            <button class="close-btn" onclick="this.closest('.profile-modal').remove()">
                                <svg class="icon" viewBox="0 0 24 24">
                                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="profile-modal-body">
                            <form id="linkedinProfileForm">
                                <div class="form-group">
                                    <label for="linkedinEmail" id="linkedinEmailLabel">Email LinkedIn</label>
                                    <input type="email" id="linkedinEmail" name="linkedinEmail" 
                                           placeholder="votre.email@exemple.com" required>
                                </div>
                                <div class="form-group">
                                    <label for="linkedinPassword" id="linkedinPasswordLabel">Mot de passe LinkedIn</label>
                                    <input type="password" id="linkedinPassword" name="linkedinPassword" 
                                           placeholder="Votre mot de passe" required>
                                </div>
                                <div class="form-group">
                                    <label for="linkedinProfileUrl" id="linkedinProfileUrlLabel">URL de votre profil LinkedIn (optionnel)</label>
                                    <input type="url" id="linkedinProfileUrl" name="linkedinProfileUrl" 
                                           placeholder="https://www.linkedin.com/in/votre-profil">
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="save-btn" id="saveProfileBtn">
                                        <svg class="icon" viewBox="0 0 24 24">
                                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                        </svg>
                                        <span id="saveProfileText">Sauvegarder</span>
                                    </button>
                                    <button type="button" class="cancel-btn" onclick="this.closest('.profile-modal').remove()">
                                        <span id="cancelProfileText">Annuler</span>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
                
                // Ajouter le modal au body
                document.body.appendChild(modal);
                
                // Charger le profil existant et pré-remplir le formulaire
                this.loadLinkedInProfile(modal);
                
                // Gérer la soumission du formulaire
                const form = modal.querySelector('#linkedinProfileForm');
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveLinkedInProfile(modal);
                });
                
                // Traduire le modal
                this.updateProfileModalLanguage();
            }
            
            // Charger le profil LinkedIn sauvegardé
            loadLinkedInProfile(modal) {
                try {
                    const savedProfile = localStorage.getItem('linkedinProfile');
                    if (savedProfile) {
                        const profile = JSON.parse(savedProfile);
                        
                        // Pré-remplir les champs
                        const emailInput = modal.querySelector('#linkedinEmail');
                        const passwordInput = modal.querySelector('#linkedinPassword');
                        const urlInput = modal.querySelector('#linkedinProfileUrl');
                        
                        if (emailInput && profile.email) {
                            emailInput.value = profile.email;
                        }
                        
                        if (passwordInput && profile.password) {
                            passwordInput.value = profile.password;
                        }
                        
                        if (urlInput && profile.profileUrl) {
                            urlInput.value = profile.profileUrl;
                        }
                        
                        // Afficher une indication que le profil est chargé
                        if (profile.savedAt) {
                            const savedDate = new Date(profile.savedAt);
                            const dateStr = savedDate.toLocaleDateString(this.currentLanguage === 'fr' ? 'fr-FR' : 'en-US');
                            this.showNotification(
                                this.currentLanguage === 'fr' ? 
                                `Profil chargé (sauvegardé le ${dateStr})` : 
                                `Profile loaded (saved on ${dateStr})`,
                                'info'
                            );
                        }
                        
                        console.log('✅ Profil LinkedIn chargé avec succès');
                    } else {
                        console.log('ℹ️ Aucun profil LinkedIn sauvegardé trouvé');
                    }
                    
                    // Mettre à jour le statut du profil
                    this.updateProfileStatus();
                } catch (error) {
                    console.error('❌ Erreur lors du chargement du profil:', error);
                    this.showNotification(
                        this.currentLanguage === 'fr' ? 
                        'Erreur lors du chargement du profil sauvegardé' : 
                        'Error loading saved profile',
                        'error'
                    );
                }
            }
            
            // Sauvegarder le profil LinkedIn
            saveLinkedInProfile(modal) {
                const email = modal.querySelector('#linkedinEmail')?.value?.trim();
                const password = modal.querySelector('#linkedinPassword')?.value?.trim();
                const profileUrl = modal.querySelector('#linkedinProfileUrl')?.value?.trim();
                
                // Validation des champs
                if (!email) {
                    this.showNotification(
                        this.currentLanguage === 'fr' ? 
                        'Veuillez saisir votre email LinkedIn' : 
                        'Please enter your LinkedIn email',
                        'error'
                    );
                    return;
                }
                
                if (!password) {
                    this.showNotification(
                        this.currentLanguage === 'fr' ? 
                        'Veuillez saisir votre mot de passe LinkedIn' : 
                        'Please enter your LinkedIn password',
                        'error'
                    );
                    return;
                }
                
                // Validation de l'email
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    this.showNotification(
                        this.currentLanguage === 'fr' ? 
                        'Veuillez saisir un email valide' : 
                        'Please enter a valid email',
                        'error'
                    );
                    return;
                }
                
                // Validation de l'URL si fournie
                if (profileUrl && !this.isValidUrl(profileUrl)) {
                    this.showNotification(
                        this.currentLanguage === 'fr' ? 
                        'Veuillez saisir une URL LinkedIn valide' : 
                        'Please enter a valid LinkedIn URL',
                        'error'
                    );
                    return;
                }
                
                try {
                // Sauvegarder dans le localStorage (en production, utiliser un stockage sécurisé)
                    const profile = { 
                        email, 
                        password, 
                        profileUrl: profileUrl || '', 
                        savedAt: new Date().toISOString(),
                        updatedAt: new Date().toISOString()
                    };
                    
                localStorage.setItem('linkedinProfile', JSON.stringify(profile));
                
                    // Afficher le succès
                    this.showNotification(
                        this.currentLanguage === 'fr' ? 
                    'Profil LinkedIn sauvegardé avec succès !' : 
                        'LinkedIn profile saved successfully!',
                        'success'
                    );
                    
                    // Mettre à jour le statut du profil
                    this.updateProfileStatus();
                    
                    // Fermer le modal après un court délai
                    setTimeout(() => {
                        if (modal.parentNode) {
                            modal.remove();
                        }
                    }, 1500);
                    
                    console.log('✅ Profil LinkedIn sauvegardé avec succès');
                    
                } catch (error) {
                    console.error('❌ Erreur lors de la sauvegarde du profil:', error);
                    this.showNotification(
                        this.currentLanguage === 'fr' ? 
                        'Erreur lors de la sauvegarde du profil' : 
                        'Error saving profile',
                        'error'
                    );
                }
            }
            
            // Valider une URL
            isValidUrl(string) {
                try {
                    const url = new URL(string);
                    return url.hostname.includes('linkedin.com');
                } catch (_) {
                    return false;
                }
            }
            
            
            
            // Mettre à jour la langue du modal de profil
            updateProfileModalLanguage() {
                const isFrench = this.currentLanguage === 'fr';
                
                // Titres et labels
                const profileModalTitle = document.getElementById('profileModalTitle');
                if (profileModalTitle) profileModalTitle.textContent = isFrench ? 'Profil LinkedIn' : 'LinkedIn Profile';
                
                const linkedinEmailLabel = document.getElementById('linkedinEmailLabel');
                if (linkedinEmailLabel) linkedinEmailLabel.textContent = isFrench ? 'Email LinkedIn' : 'LinkedIn Email';
                
                const linkedinPasswordLabel = document.getElementById('linkedinPasswordLabel');
                if (linkedinPasswordLabel) linkedinPasswordLabel.textContent = isFrench ? 'Mot de passe LinkedIn' : 'LinkedIn Password';
                
                const linkedinProfileUrlLabel = document.getElementById('linkedinProfileUrlLabel');
                if (linkedinProfileUrlLabel) linkedinProfileUrlLabel.textContent = isFrench ? 'URL de votre profil LinkedIn (optionnel)' : 'Your LinkedIn Profile URL (optional)';
                
                // Boutons
                const saveProfileText = document.getElementById('saveProfileText');
                if (saveProfileText) saveProfileText.textContent = isFrench ? 'Sauvegarder' : 'Save';
                
                const cancelProfileText = document.getElementById('cancelProfileText');
                if (cancelProfileText) cancelProfileText.textContent = isFrench ? 'Annuler' : 'Cancel';
                
                // Placeholders
                const emailInput = document.getElementById('linkedinEmail');
                const passwordInput = document.getElementById('linkedinPassword');
                const urlInput = document.getElementById('linkedinProfileUrl');
                
                if (emailInput) emailInput.placeholder = isFrench ? 'votre.email@exemple.com' : 'your.email@example.com';
                if (passwordInput) passwordInput.placeholder = isFrench ? 'Votre mot de passe' : 'Your password';
                if (urlInput) urlInput.placeholder = isFrench ? 'https://www.linkedin.com/in/votre-profil' : 'https://www.linkedin.com/in/your-profile';
            }
            
            // Mettre à jour le statut du profil LinkedIn
            updateProfileStatus() {
                const profileStatus = this.getElement('profileStatus');
                if (!profileStatus) return;
                
                if (this.hasValidLinkedInProfile()) {
                    profileStatus.style.background = 'var(--success-color)';
                    profileStatus.title = this.currentLanguage === 'fr' ? 'Profil LinkedIn configuré' : 'LinkedIn profile configured';
                } else {
                    profileStatus.style.background = 'var(--warning-color)';
                    profileStatus.title = this.currentLanguage === 'fr' ? 'Profil LinkedIn non configuré' : 'LinkedIn profile not configured';
                }
            }
            
            // Publier le post sur LinkedIn
            async publishToLinkedIn() {
                console.log('📤 publishToLinkedIn appelé');
                
                if (!this.elements.postContent) {
                    this.showNotification(this.currentLanguage === 'fr' ? 
                        'Aucun contenu à publier. Générez d\'abord un post.' : 
                        'No content to publish. Generate a post first.',
                        'warning'
                    );
                    return;
                }
                
                const postContent = this.elements.postContent.textContent;
                
                if (!postContent.trim()) {
                    this.showNotification(this.currentLanguage === 'fr' ? 
                        'Le contenu du post est vide.' : 
                        'Post content is empty.',
                        'warning'
                    );
                    return;
                }
                
                if (!this.hasValidLinkedInProfile()) {
                    this.showNotification(this.currentLanguage === 'fr' ? 
                        'Veuillez d\'abord configurer votre profil LinkedIn dans les paramètres.' : 
                        'Please configure your LinkedIn profile in settings first.',
                        'info'
                    );
                    this.showProfileModal();
                    return;
                }

                const success = await this.copyToClipboard(postContent);

                if (success) {
                    window.open('https://www.linkedin.com/feed/', '_blank');
                    this.showNotification(
                        this.currentLanguage === 'fr' ?
                        'Contenu copié ! Collez-le sur LinkedIn.' :
                        'Content copied! Paste it on LinkedIn.',
                        'success'
                    );
                } else {
                    this.showNotification(this.currentLanguage === 'fr' ? 'Erreur de copie.' : 'Copy error.', 'error');
                }
            }
            
            // Sauvegarder le post publié
            savePublishedPost(content, profile) {
                const publishedPost = {
                    content,
                    publishedAt: new Date().toISOString(),
                    linkedinEmail: profile.email,
                    profileUrl: profile.profileUrl
                };
                
                // Récupérer les posts publiés existants
                const publishedPosts = JSON.parse(localStorage.getItem('publishedPosts') || '[]');
                publishedPosts.push(publishedPost);
                localStorage.setItem('publishedPosts', JSON.stringify(publishedPosts));
                
                console.log('✅ Post publié sauvegardé');
            }
            
            // Gérer l'état de publication
            setPublishingState(isPublishing) {
                if (!this.elements.publishLinkedInBtn) return;
                
                if (isPublishing) {
                    this.originalPublishText = this.elements.publishLinkedInBtn.innerHTML;
                    this.elements.publishLinkedInBtn.disabled = true;
                    this.elements.publishLinkedInBtn.innerHTML = `
                        <svg class="icon loading" viewBox="0 0 24 24" aria-hidden="true">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="31.416" stroke-dashoffset="31.416">
                                <animate attributeName="stroke-dasharray" dur="2s" values="0 31.416;15.708 15.708;0 31.416" repeatCount="indefinite"/>
                                <animate attributeName="stroke-dashoffset" dur="2s" values="0;-15.708;-31.416" repeatCount="indefinite"/>
                            </circle>
                        </svg>
                        <span>${this.currentLanguage === 'fr' ? 'Publication...' : 'Publishing...'}</span>
                    `;
                } else {
                    this.elements.publishLinkedInBtn.disabled = false;
                    this.elements.publishLinkedInBtn.innerHTML = this.originalPublishText;
                }
            }
            
            // Vérifier si un profil LinkedIn est configuré
            hasLinkedInProfile() {
                try {
                    const profile = localStorage.getItem('linkedinProfile');
                    return profile !== null;
                } catch (error) {
                    console.error('Erreur lors de la vérification du profil:', error);
                    return false;
                }
            }
            
            // Obtenir les informations du profil LinkedIn
            getLinkedInProfile() {
                try {
                    const profile = localStorage.getItem('linkedinProfile');
                    return profile ? JSON.parse(profile) : null;
                } catch (error) {
                    console.error('Erreur lors de la récupération du profil:', error);
                    return null;
                }
            }

            // Validation stricte du profil LinkedIn
            hasValidLinkedInProfile() {
                try {
                    const profile = this.getLinkedInProfile();
                    if (!profile || typeof profile !== 'object') return false;
                    const hasEmail = typeof profile.email === 'string' && profile.email.trim().length > 0;
                    const hasUrlOrOptional = profile.profileUrl === undefined || profile.profileUrl === null || (typeof profile.profileUrl === 'string' && profile.profileUrl.trim().length > 0);
                    return hasEmail && hasUrlOrOptional;
                } catch (error) {
                    console.error('Erreur lors de la validation du profil LinkedIn:', error);
                    return false;
                }
            }
        }
        
        // Fonction de scroll vers le générateur
        function scrollToGenerator() {
            const generator = document.getElementById('generator');
            if (generator) {
                generator.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        }
        
        // Fonctions de debug pour tester le bouton LinkedIn
        window.debugActivateLinkedInButton = function() {
            console.log('🔧 DEBUG: Activation manuelle du bouton LinkedIn');
            
            const publishBtn = document.getElementById('publishLinkedInBtn');
            const debugBtn = document.getElementById('debugActivateBtn');
            
            if (publishBtn) {
                // Forcer tous les styles et propriétés
                publishBtn.style.display = 'inline-flex';
                publishBtn.disabled = false;
                publishBtn.classList.remove('disabled');
                publishBtn.classList.add('active');
                publishBtn.style.pointerEvents = 'auto';
                publishBtn.style.opacity = '1';
                publishBtn.style.cursor = 'pointer';
                publishBtn.style.zIndex = '999';
                
                // Masquer le bouton de debug
                if (debugBtn) {
                    debugBtn.style.display = 'none';
                }
                
                console.log('✅ DEBUG: Bouton LinkedIn activé manuellement');
                alert('✅ Bouton LinkedIn activé ! Vous pouvez maintenant cliquer dessus.');
            } else {
                console.log('❌ DEBUG: Bouton LinkedIn non trouvé');
                alert('❌ Bouton LinkedIn non trouvé dans le DOM');
            }
        };
        
        // Fonction de test de clic
        window.testPublishClick = function() {
            console.log('🖱️ DEBUG: Test de clic sur le bouton Publier');
            const publishBtn = document.getElementById('publishLinkedInBtn');
            
            if (publishBtn) {
                console.log('🔍 État du bouton avant clic:', {
                    disabled: publishBtn.disabled,
                    display: publishBtn.style.display,
                    pointerEvents: publishBtn.style.pointerEvents,
                    opacity: publishBtn.style.opacity,
                    className: publishBtn.className
                });
                
                // Simuler un clic
                publishBtn.click();
                console.log('🎯 Clic simulé envoyé');
            } else {
                console.log('❌ Bouton non trouvé pour le test');
            }
        };
        
        // Fonction de diagnostic complet
        window.debugButtonState = function() {
            console.log('🔍 === DIAGNOSTIC COMPLET DU BOUTON PUBLIER ===');
            const publishBtn = document.getElementById('publishLinkedInBtn');
            
            if (!publishBtn) {
                console.log('❌ ERREUR: Bouton non trouvé');
                return;
            }
            
            const computedStyle = window.getComputedStyle(publishBtn);
            const rect = publishBtn.getBoundingClientRect();
            
            console.log('📍 Élément:', publishBtn.tagName + '#' + publishBtn.id);
            console.log('🎯 Display:', computedStyle.display);
            console.log('🔒 Disabled:', publishBtn.disabled);
            console.log('👆 Pointer Events:', computedStyle.pointerEvents);
            console.log('👁️ Opacity:', computedStyle.opacity);
            console.log('🏷️ Classes:', publishBtn.className);
            console.log('📐 Position:', computedStyle.position);
            console.log('📏 Z-Index:', computedStyle.zIndex);
            console.log('🖱️ Cursor:', computedStyle.cursor);
            console.log('📦 Dimensions:', rect.width + 'x' + rect.height);
            console.log('📍 Position:', rect.left + ',' + rect.top);
            
            // Test d'accessibilité
            const elementAtCenter = document.elementFromPoint(
                rect.left + rect.width / 2,
                rect.top + rect.height / 2
            );
            
            if (elementAtCenter === publishBtn) {
                console.log('✅ Bouton accessible au centre');
            } else {
                console.log('⚠️ Élément différent au centre:', elementAtCenter?.tagName + '#' + elementAtCenter?.id);
            }
        };
        
        // Initialisation de l'application
        let app;
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('🚀 DOM chargé, initialisation de l\'application...');
            
            try {
                app = new LinkedInPostApp();
                // Rendre l'application accessible globalement
                window.app = app;
                console.log('✅ Application initialisée et accessible globalement:', window.app);
            } catch (error) {
                console.error('❌ Erreur initialisation app:', error);
                // Afficher une erreur utilisateur
                const errorDiv = document.createElement('div');
                errorDiv.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(231, 76, 60, 0.9);
                    color: white;
                    padding: 2rem;
                    border-radius: 12px;
                    text-align: center;
                    z-index: 10000;
                    max-width: 400px;
                `;
                errorDiv.innerHTML = `
                    <h3>Erreur de chargement</h3>
                    <p>Impossible de charger l'application. Veuillez rafraîchir la page.</p>
                    <button onclick="window.location.reload()" style="
                        background: white;
                        color: #e74c3c;
                        border: none;
                        padding: 0.5rem 1rem;
                        border-radius: 6px;
                        margin-top: 1rem;
                        cursor: pointer;
                    ">Rafraîchir</button>
                `;
                document.body.appendChild(errorDiv);
            }
        });
    </script>
</body>
</html>
